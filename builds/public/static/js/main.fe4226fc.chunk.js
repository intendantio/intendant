(this["webpackJsonp@intendant/dashboard"]=this["webpackJsonp@intendant/dashboard"]||[]).push([[0],{136:function(e){e.exports=JSON.parse("{}")},348:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),i=n(20),r=n.n(i),c=n(30),o=n(5),l=n.n(o),d=n(10),u=n(11),h=n(12),j=n(14),b=n(13),p=(n(136),n(206)),g=n(427),f=n(404),m=n(192),x=n(422),v=n(424),O=n(0);var y=function(e){return Object(O.jsx)(v.a,{open:e.open,autoHideDuration:6e3,onClose:function(){return e.onClose()},children:Object(O.jsx)(x.a,Object(m.a)({severity:e.severity,elevation:6,variant:"filled"},e))})},w=n(21),S=n(125),k=n.n(S),C=n(138),T=n(69),D=n(393),R=n(394),M=n(395),A=n(396),I=n(397),P=n(398),B=n(351),E=n(421),W=(n(23),n(148),function(){function e(){Object(u.a)(this,e),this.method="GET"}return Object(h.a)(e,[{key:"post",value:function(e){return this.method="POST",this.data=e,this}},{key:"get",value:function(){return this.method="GET",this}},{key:"delete",value:function(){return this.method="DELETE",this}},{key:"put",value:function(e){return this.method="PUT",this.data=e,this}},{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("authorization"),a=localStorage.getItem("server"),e.prev=2,e.next=5,fetch(a+t,{method:this.method,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n},body:"POST"==this.method||"PUT"==this.method?JSON.stringify(this.data):null});case 5:return s=e.sent,e.next=8,s.json();case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",{error:!0,message:"An error has occurred"});case 14:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}())}]),e}()),z=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={page:0,enabled:!1,message:"",smartobjects:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).get().fetch("/api/smartobjects");case 2:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.setState({enabled:!1,message:"",smartobjects:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsxs)(O.Fragment,{children:[this.state.loading?Object(O.jsx)(p.a,{style:{display:"flex",padding:10,alignContent:"center",justifyContent:"center",alignItems:"center",alignSelf:"center"},children:Object(O.jsx)(T.a,{variant:"subtitle1",style:{fontSize:18},children:"Chargement des smartobject"})}):Object(O.jsxs)("div",{children:[Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsxs)(R.a,{children:[Object(O.jsx)(M.a,{children:Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:"Reference"})}),Object(O.jsx)(I.a,{align:"center",children:Object(O.jsx)(T.a,{variant:"body1",children:"Status"})}),Object(O.jsx)(I.a,{align:"center",children:Object(O.jsx)(T.a,{variant:"body1",children:"Last use"})})]})}),Object(O.jsx)(P.a,{children:this.state.smartobjects.slice(10*this.state.page,10*(this.state.page+1)).map((function(e){return Object(O.jsx)(w.b,{to:"/smartobject/"+e.id,style:{textDecoration:"none",color:"white",display:"contents"},children:Object(O.jsxs)(A.a,{hover:!0,style:{cursor:"pointer"},children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:e.reference})}),Object(O.jsx)(I.a,{align:"center",children:Object(O.jsx)(T.a,{variant:"body1",children:Object(O.jsx)("img",{style:{height:25,width:25,alignSelf:"center",filter:"invert(100%)"},src:"/admin/ressource/icon/"+e.status.icon+".svg"})})}),Object(O.jsx)(I.a,{align:"center",children:Object(O.jsx)(T.a,{variant:"body1",children:k()(e.lastUse).format("hh:mm DD/MM")})})]},e.name)})}))})]})}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignContent:"center",alignItems:"center"},children:[Object(O.jsx)(p.a,{style:{width:50,height:50,marginTop:10,padding:5,marginBottom:10,textAlign:"center",justifyContent:"space-around",alignContent:"center",alignItems:"center",display:"flex",flexDirection:"row"},children:Object(O.jsx)(w.b,{to:"/smartobject/new",style:{textDecoration:"none",color:"white"},children:Object(O.jsx)(B.a,{style:{borderRadius:0},children:Object(O.jsx)(C.a,{})})})}),Object(O.jsx)(E.a,{component:"div",count:this.state.smartobjects.length,rowsPerPage:10,page:this.state.page,rowsPerPageOptions:[],onChangePage:function(t,n){e.setState({page:n})}})]})]}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]})}}]),n}(s.a.Component),L=n(58),N=n.n(L),F=n(408),J=n(352),V=n(409),_=n(410),U=n(151),H=n(144),Q=n(143),q=n(353),G=n(407),K=n(405),X=n(428),Y=n(420),Z=n(399),$=n(430),ee=n(423),te=n(202),ne=n(140),ae=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={value:"",sunday:!1,monday:!1,tuesday:!1,wednesday:!1,friday:!1,saturday:!1,time:"00:00"},a}return Object(h.a)(n,[{key:"calculate",value:function(){var e=this.state.time.split(":");if(2==e.length){var t=e[1]+" "+e[0]+" * * "+(this.state.sunday?"0,":"")+(this.state.monday?"1,":"")+(this.state.tuesday?"2,":"")+(this.state.wednesday?"3,":"")+(this.state.thursday?"4,":"")+(this.state.friday?"5,":"")+(this.state.saturday?"6,":"");t=t.slice(0,t.length-1),this.props.onChange(t)}}},{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{style:{display:"flex",paddingTop:10,paddingBottom:10,paddingLeft:5,paddingRight:5,flexDirection:"column"},children:Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignContent:"center",alignItems:"center",flex:1,justifyContent:"space-between"},children:[this.props.noChangeMode?null:Object(O.jsx)("div",{style:{flex:1},children:Object(O.jsx)(B.a,{size:"small",onClick:function(){e.props.onChangeMode()},variant:"outlined",children:Object(O.jsx)(ne.a,{})})}),Object(O.jsx)("div",{style:{flex:3,textAlign:"center",marginRight:2,marginLeft:2},children:Object(O.jsx)(f.a,{fullWidth:!0,size:"small",variant:this.state.sunday?"contained":"outlined",onClick:function(){e.setState({sunday:!e.state.sunday},(function(){e.calculate()}))},children:"Sunday"})}),Object(O.jsx)("div",{style:{flex:3,textAlign:"center",marginRight:2,marginLeft:2},children:Object(O.jsx)(f.a,{fullWidth:!0,size:"small",variant:this.state.monday?"contained":"outlined",onClick:function(){e.setState({monday:!e.state.monday},(function(){e.calculate()}))},children:"Monday"})}),Object(O.jsx)("div",{style:{flex:3,textAlign:"center",marginRight:2,marginLeft:2},children:Object(O.jsx)(f.a,{fullWidth:!0,size:"small",variant:this.state.tuesday?"contained":"outlined",onClick:function(){e.setState({tuesday:!e.state.tuesday},(function(){e.calculate()}))},children:"Tuesday"})}),Object(O.jsx)("div",{style:{flex:3,textAlign:"center",marginRight:2,marginLeft:2},children:Object(O.jsx)(f.a,{fullWidth:!0,size:"small",variant:this.state.wednesday?"contained":"outlined",onClick:function(){e.setState({wednesday:!e.state.wednesday},(function(){e.calculate()}))},children:"Wednesday"})}),Object(O.jsx)("div",{style:{flex:3,textAlign:"center",marginRight:2,marginLeft:2},children:Object(O.jsx)(f.a,{fullWidth:!0,size:"small",variant:this.state.thursday?"contained":"outlined",onClick:function(){e.setState({thursday:!e.state.thursday},(function(){e.calculate()}))},children:"Thursday"})}),Object(O.jsx)("div",{style:{flex:3,textAlign:"center",marginRight:2,marginLeft:2},children:Object(O.jsx)(f.a,{fullWidth:!0,size:"small",variant:this.state.friday?"contained":"outlined",onClick:function(){e.setState({friday:!e.state.friday},(function(){e.calculate()}))},children:"Friday"})}),Object(O.jsx)("div",{style:{flex:3,textAlign:"center",marginRight:2,marginLeft:2},children:Object(O.jsx)(f.a,{fullWidth:!0,size:"small",variant:this.state.saturday?"contained":"outlined",onClick:function(){e.setState({saturday:!e.state.saturday},(function(){e.calculate()}))},children:"Saturday"})}),Object(O.jsx)("div",{style:{flex:3,textAlign:"center",marginRight:2,marginLeft:2},children:Object(O.jsx)(g.a,{defaultValue:"00:00",size:"small",value:this.state.time,onChange:function(t){e.setState({time:t.currentTarget.value},(function(){e.calculate()}))},placeholder:"hh:mm",variant:"outlined"})})]})})}}]),n}(s.a.Component),se=n(429),ie=n(203),re=n(99),ce=n(406),oe=Object(se.a)(Object(ie.a)({palette:{type:"dark",primary:{main:re.a[600]},secondary:{main:ce.a[500]}},typography:{fontFamily:"'Poppins', sans-serif",fontWeightLight:400,fontWeightRegular:500,fontWeightMedium:600},shape:{borderRadius:4}})),le={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:oe.palette.background.paper,padding:10,borderRadius:5},de=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={action:a.props.action,setState:a.props.setState,modal:!1,value:a.props.action.default},a}return Object(h.a)(n,[{key:"updateAction",value:function(e,t){var n={};n["argument-"+e.id]=t,this.state.setState(n),this.setState({value:t})}},{key:"render",value:function(){var e=this;switch(this.state.action.type){case"text":return Object(O.jsx)("div",{elevation:3,style:{alignItems:"center",display:"flex",marginRight:10,minWidth:"150px"},children:Object(O.jsx)(g.a,{variant:"outlined",placeholder:this.state.action.id,onChange:function(t){e.updateAction(e.state.action,t.currentTarget.value)}})});case"cron":return Object(O.jsxs)("div",{elevation:3,style:{alignItems:"center",display:"flex",marginRight:10,width:"200px"},children:[Object(O.jsx)(q.a,{open:this.state.modal,onClose:function(){e.setState({modal:!1})},children:Object(O.jsx)(G.a,{in:this.state.modal,children:Object(O.jsx)(p.a,{style:le,children:Object(O.jsx)(ae,{noChangeMode:!0,onChange:function(t){e.updateAction(e.state.action,t),e.setState({value:t})},onChangeMode:function(){}})})})}),Object(O.jsx)(f.a,{variant:"outlined",style:{flexDirection:"column",width:"200px"},size:"large",onClick:function(){e.setState({modal:!0})},children:Object(O.jsx)(T.a,{style:{fontSize:this.state.value.length>0?12:14,padding:8,color:this.state.value.length>0?"white":"rgba(255, 255, 255, 0.6)"},children:0==this.state.value.length?this.state.action.id:this.state.value})})]});case"number":return Object(O.jsx)("div",{elevation:3,style:{alignItems:"center",display:"flex",marginRight:10,minWidth:"150px"},children:Object(O.jsx)(g.a,{variant:"outlined",placeholder:this.state.action.id,onChange:function(t){e.updateAction(e.state.action,t.currentTarget.value)}})});case"select":return Object(O.jsx)("div",{elevation:3,style:{alignItems:"center",display:"flex",marginRight:10},children:Object(O.jsxs)(K.a,{variant:"outlined",style:{width:"150px"},children:[Object(O.jsx)(X.a,{children:this.state.action.id}),Object(O.jsx)(Y.a,{onChange:function(t){e.updateAction(e.state.action,t.target.value)},label:this.state.action.id,children:this.state.action.values.map((function(e){return Object(O.jsx)(Z.a,{value:e,children:e})}))})]})});case"colorpicker":return Object(O.jsx)("div",{elevation:3,style:{alignItems:"flex-start",display:"flex",padding:10,marginRight:5,flexDirection:this.props.flexDirection?this.props.flexDirection:"row"},children:Object(O.jsx)(te.a,{styles:{padding:0},colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"hide",color:this.state.value,onChangeComplete:function(t){e.updateAction(e.state.action,t.hex)}})});case"slider":return Object(O.jsxs)("div",{elevation:3,style:{minWidth:100,height:"fit-content",alignSelf:"flex-start",borderWidth:1,borderStyle:"solid",borderRadius:5,borderColor:"rgba(255, 255, 255, 0.23)",alignItems:"center",justifyContent:"center",display:"flex",flexDirection:this.props.flexDirection?this.props.flexDirection:"row",paddingTop:10,paddingBottom:10,paddingLeft:15,paddingRight:15,marginRight:10},children:[Object(O.jsx)(T.a,{variant:"body1",style:{textAlign:"center",color:"rgba(255, 255, 255, 0.5)",padding:0},children:this.state.action.id}),Object(O.jsx)("div",{style:{marginBottom:2,marginTop:2}}),Object(O.jsx)($.a,{defaultValue:0,valueLabelDisplay:"auto",orientation:this.props.orientation?this.props.orientation:"horizontal",min:this.state.action.min,max:this.state.action.max,step:this.state.action.step,onChange:function(t,n){e.updateAction(e.state.action,n)}})]});case"checkbox":return Object(O.jsxs)("div",{elevation:3,style:{height:"fit-content",alignSelf:"center",borderWidth:1,borderStyle:"solid",borderRadius:5,borderColor:"rgba(255, 255, 255, 0.23)",alignItems:"center",justifyContent:"center",display:"flex",flexDirection:this.props.flexDirection?this.props.flexDirection:"row",paddingTop:10,paddingBottom:10,paddingLeft:15,paddingRight:15,marginRight:10},children:[Object(O.jsx)(T.a,{variant:"body1",style:{textAlign:"center",color:"rgba(255, 255, 255, 0.5)",padding:0},children:this.state.action.id}),Object(O.jsx)(ee.a,{defaultChecked:this.state.action.default,color:"primary",onChange:function(t,n){e.updateAction(e.state.action,n)}})]});default:return null}}}]),n}(s.a.Component),ue=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={id:e.match.params.id,smartobject:null,profiles:[],enabled:!1,loading:null,message:"",referenceArguments:"",valueArguments:"",executeInformation:""},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).get().fetch("/api/profiles");case 2:return t=e.sent,e.next=5,(new W).get().fetch("/api/smartobjects/"+this.state.id);case 5:n=e.sent,t.error||n.error?this.props.history.push("/smartobject"):this.setState({smartobject:n.data,profiles:t.data}),this.setState({loading:null});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).delete().fetch("/api/smartobjects/"+t);case 2:(n=e.sent).error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.props.history.push("/smartobject");case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"executeAction",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,s,i,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.setState({loading:t}),a={},s=0;s<n.length;s++)i=n[s],void 0==(r=this.state["argument-"+i.id])&&(r=i.default),a[i.id]=r;return e.next=5,(new W).post({settings:a}).fetch("/api/smartobjects/"+this.state.id+"/actions/"+t);case 5:(c=e.sent).error?this.setState({enabled:!0,message:c.package+" : "+c.message,loading:null}):(c.data&&this.setState({executeInformation:JSON.stringify(c.data)}),this.componentDidMount());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteSmartobjectArguments",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).delete().fetch("/api/smartobjects/"+t.smartobject+"/arguments/"+t.id);case 2:(n=e.sent).error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"insertSmartobjectArguments",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n,a){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).post({reference:n,value:a}).fetch("/api/smartobjects/"+t+"/arguments");case 2:(s=e.sent).error?this.setState({enabled:!0,message:s.package+" : "+s.message}):(this.setState({referenceArguments:"",valueArguments:""}),this.componentDidMount());case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"insertProfile",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).post({idProfile:n.id}).fetch("/api/smartobjects/"+t.id+"/profiles");case 2:(a=e.sent).error?this.setState({enabled:!0,message:a.package+" : "+a.message}):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteProfile",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).delete().fetch("/api/smartobjects/"+t.id+"/profiles/"+n.id);case 2:(a=e.sent).error?this.setState({enabled:!0,message:a.package+" : "+a.message}):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.smartobject?Object(O.jsxs)("div",{children:[Object(O.jsxs)(p.a,{elevation:2,style:{padding:10,marginBottom:10,justifyContent:"left"},children:[Object(O.jsxs)("div",{style:{padding:10},children:[Object(O.jsx)(T.a,{variant:"h4",children:this.state.smartobject.reference}),Object(O.jsx)(T.a,{variant:"subtitle1",children:this.state.smartobject.module})]}),Object(O.jsx)(F.a,{}),Object(O.jsxs)("div",{style:{padding:10,paddingBottom:0},children:[Object(O.jsx)(T.a,{variant:"h5",children:"Configuration"}),Object(O.jsx)("div",{style:{marginTop:10,marginBottom:10,display:"flex",flexDirection:"row"},children:Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsxs)(P.a,{children:[this.state.smartobject.arguments.map((function(t){return Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"subtitle1",children:t.reference})}),Object(O.jsx)(I.a,{align:"left",style:{width:"70%"},children:Object(O.jsx)(T.a,{variant:"subtitle1",children:t.value.slice(0,50)+(t.value.length>50?" (...)":"")})}),Object(O.jsx)(I.a,{align:"right",style:{padding:4},children:Object(O.jsx)(B.a,{onClick:function(){navigator.clipboard.writeText(t.value)},style:{borderRadius:5,margin:0},children:Object(O.jsx)(U.a,{})})}),Object(O.jsx)(I.a,{align:"right",style:{padding:4},children:Object(O.jsx)(B.a,{onClick:function(){e.deleteSmartobjectArguments(t)},style:{borderRadius:5,margin:0},children:Object(O.jsx)(H.a,{})})})]},t.id)})),Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(g.a,{value:this.state.referenceArguments,onChange:function(t){e.setState({referenceArguments:t.nativeEvent.target.value})},placeholder:"Name",style:{width:"100%"}})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(g.a,{value:this.state.valueArguments,onChange:function(t){e.setState({valueArguments:t.nativeEvent.target.value})},placeholder:"Value",style:{width:"100%"}})}),Object(O.jsx)(I.a,{align:"right",style:{padding:4},children:Object(O.jsx)(B.a,{onClick:function(){e.insertSmartobjectArguments(e.state.smartobject.id,e.state.referenceArguments,e.state.valueArguments)},style:{borderRadius:5,margin:0},children:Object(O.jsx)(C.a,{})})})]},"-1")]})})})]}),Object(O.jsxs)("div",{style:{padding:10,paddingBottom:0},children:[Object(O.jsx)(T.a,{variant:"h5",children:"Action"}),this.state.smartobject.actions.map((function(t){return Object(O.jsxs)(p.a,{style:{padding:10,marginTop:10,marginBottom:10,display:"flex",flexDirection:"column",width:"100%",maxWidth:"100%"},children:[Object(O.jsx)(f.a,{disabled:e.state.loading==t.id,onClick:function(){e.executeAction(t.id,t.settings)},variant:e.state.loading==t.id?"contained":"outlined",style:{width:"250px",height:"100%"},children:t.name}),t.settings.length>0?Object(O.jsx)("div",{style:{display:"grid",gridRowGap:"10px",gridTemplateColumns:"repeat(5,min-content)",marginTop:10,marginBottom:10},children:t.settings.map((function(t){return Object(O.jsx)(de,{flexDirection:"column",orientation:"horizontal",setState:e.setState.bind(e),action:t})}))}):null]})}))]}),this.state.executeInformation.length>0?Object(O.jsx)("div",{style:{padding:10},children:Object(O.jsx)(x.a,{severity:"success",action:Object(O.jsx)(B.a,{onClick:function(){e.setState({executeInformation:""})},style:{alignSelf:"start"},color:"inherit",size:"small",children:Object(O.jsx)(Q.a,{})}),children:Object(O.jsx)(N.a,{id:"json-pretty",data:JSON.parse(this.state.executeInformation)})})}):null,Object(O.jsxs)("div",{style:{padding:10,paddingBottom:0},children:[Object(O.jsx)(T.a,{variant:"h5",children:"Authorization"}),this.state.profiles.map((function(t){var n=!1;return e.state.smartobject.profiles.forEach((function(e){e.profile==t.id&&(n=!0)})),Object(O.jsx)(J.a,{style:{padding:1},children:Object(O.jsx)(V.a,{control:Object(O.jsx)(_.a,{checked:n,onChange:function(){n?e.deleteProfile(e.state.smartobject,t):e.insertProfile(e.state.smartobject,t)},color:"primary"}),label:t.name})})}))]})]}),Object(O.jsx)(p.a,{style:{width:"min-content",marginTop:10,marginBottom:10,alignContent:"center",justifyContent:"center",alignSelf:"center"},children:Object(O.jsx)(B.a,{onClick:function(){e.delete(e.state.id)},style:{borderRadius:5},children:Object(O.jsx)(H.a,{})})}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]}):Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})}}]),n}(s.a.Component),he=n(158),je=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={module:!1,reference:"",enabled:!1,message:"",types:[],smartobjects:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).get().fetch("/api/configurations/smartobject");case 2:return t=e.sent,e.next=5,(new W).get().fetch("/api/smartobjects");case 5:n=e.sent,t.error||n.error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.setState({enabled:!1,message:"",types:t.data,smartobjects:n.data});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setModule",value:function(e){var t=this;this.state.types.forEach((function(n){n.name===e&&t.setState({module:n})}))}},{key:"updateSettings",value:function(e,t){var n={};n["settings-"+e]=t,this.setState(n)}},{key:"add",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.state.reference){e.next=4;break}this.setState({enabled:!0,message:"Missing-parameter : reference is empty"}),e.next=14;break;case 4:if(""!==this.state.module.name){e.next=8;break}this.setState({enabled:!0,message:"Missing-parameter : type not selected"}),e.next=14;break;case 8:for(t=[],n=0;n<this.state.module.settings.length;n++)a=this.state.module.settings[n],t.push({reference:a.id,value:this.state["settings-"+a.name]?this.state["settings-"+a.name]:""});return e.next=12,(new W).post({module:this.state.module.name,reference:this.state.reference,settings:t}).fetch("/api/smartobjects");case 12:(s=e.sent).error?this.setState({enabled:!0,message:s.package+" : "+s.message}):this.props.history.push("/smartobject");case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsxs)(p.a,{elevation:2,style:{padding:10,justifyContent:"left"},children:[Object(O.jsx)("div",{style:{flexDirection:"row",display:"flex",justifyContent:"space-between"},children:Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"start",flexDirection:"row",alignSelf:"start",alignContent:"start",alignItems:"start",padding:10},children:[Object(O.jsx)(g.a,{onChange:function(t){e.setState({reference:t.nativeEvent.target.value})},style:{width:"150px",marginRight:10},label:"Reference",variant:"outlined"}),Object(O.jsxs)(K.a,{variant:"outlined",style:{marginRight:10,width:"300px"},children:[Object(O.jsx)(X.a,{children:"Module"}),Object(O.jsx)(Y.a,{value:this.state.module.name,onChange:function(t){e.setModule(t.target.value)},label:"Connexion",children:this.state.types.map((function(e){return Object(O.jsx)(Z.a,{value:e.name,children:e.name})}))})]})]})}),this.state.module?0===this.state.module.settings.length?null:Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:10},children:[Object(O.jsx)(T.a,{variant:"body1",style:{fontSize:20},children:"Configuration"}),this.state.module.settings.map((function(t){return"smartobject"==t.type?Object(O.jsxs)(K.a,{variant:"outlined",style:{marginTop:10,width:"300px"},children:[Object(O.jsx)(X.a,{children:t.name}),Object(O.jsx)(Y.a,{onChange:function(n){e.updateSettings(t.name,n.target.value)},children:e.state.smartobjects.filter((function(e){return e.module==t.reference})).map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.reference})}))})]}):"select"==t.type?Object(O.jsxs)(K.a,{variant:"outlined",style:{marginTop:10,width:"300px"},children:[Object(O.jsx)(X.a,{children:t.name}),Object(O.jsx)(Y.a,{onChange:function(n){e.updateSettings(t.name,n.target.value)},children:t.values.map((function(e){return Object(O.jsx)(Z.a,{value:e,children:e})}))})]}):Object(O.jsx)(g.a,{onChange:function(n){e.updateSettings(t.name,n.nativeEvent.target.value)},style:{width:"300px",marginTop:10},label:t.name,variant:"outlined"})}))]}):null]}),Object(O.jsx)(p.a,{style:{width:"min-content",height:"min-content",padding:2,alignContent:"center",alignItems:"center",justifyContent:"center",alignSelf:"center",marginTop:5},children:Object(O.jsx)(B.a,{onClick:function(){e.add()},style:{borderRadius:0},variant:"outlined",children:Object(O.jsx)(he.a,{})})}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]})}}]),n}(s.a.Component),be=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={page:0,enabled:!1,message:"",processs:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).get().fetch("/api/process");case 2:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.setState({processs:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsx)(R.a,{children:Object(O.jsx)(P.a,{children:this.state.processs.slice(10*this.state.page,10*(this.state.page+1)).map((function(e){return Object(O.jsx)(w.b,{to:"/process/"+e.id,style:{textDecoration:"none",color:"white",display:"contents"},children:Object(O.jsxs)(A.a,{hover:!0,style:{cursor:"pointer"},children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)("img",{style:{width:30,height:30,filter:"invert(100%)"},src:"/admin/ressource/icon/"+e.icon+".svg"})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:e.reference})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:e.description})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:e.espace.reference})})]},e.name)})}))})})}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignContent:"center",alignItems:"center"},children:[Object(O.jsx)("div",{style:{flexDirection:"row",display:"flex"},children:Object(O.jsx)(p.a,{style:{width:50,height:50,marginTop:10,padding:5,marginBottom:10,textAlign:"center",justifyContent:"space-around",alignContent:"center",alignItems:"center",display:"flex",flexDirection:"row"},children:Object(O.jsx)(w.b,{to:"/process/new",style:{textDecoration:"none",color:"white"},children:Object(O.jsx)(B.a,{style:{borderRadius:0},children:Object(O.jsx)(C.a,{})})})})}),Object(O.jsx)(E.a,{component:"div",count:this.state.processs.length,rowsPerPage:10,page:this.state.page,rowsPerPageOptions:[],onChangePage:function(t,n){e.setState({page:n})}})]}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]})}}]),n}(s.a.Component),pe=n(412),ge=n(402),fe=n(411),me=n(153),xe=function(){function e(){Object(u.a)(this,e)}return Object(h.a)(e,null,[{key:"getSource",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,s,i,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],e.next=3,(new W).get().fetch("/api/smartobjects");case 3:return n=e.sent,e.next=6,(new W).get().fetch("/api/configurations/module");case 6:return a=e.sent,e.next=9,(new W).get().fetch("/api/process");case 9:if(!(s=e.sent).error){e.next=14;break}return e.abrupt("return",s);case 14:if(!a.error){e.next=18;break}return e.abrupt("return",a);case 18:if(!n.error){e.next=22;break}return e.abrupt("return",n);case 22:return i=[],t.includes("smartobject")&&n.data.forEach((function(e){var t=[];e.actions.forEach((function(e){t.push({id:e.id,name:e.name,settings:e.settings})})),i.push({id:e.id,name:"Smartobject "+e.reference,actions:t,type:"smartobject"})})),t.includes("module")&&a.data.forEach((function(e){var t=[];e.actions.forEach((function(e){t.push({id:e.id,name:e.name,settings:e.settings})})),i.push({id:e.name,name:"Module "+e.name,actions:t,type:"module"})})),t.includes("process")&&s.data.forEach((function(e){var t=[];"simple"==e.mode?t.push({id:"auto",name:e.name,settings:e.inputs.map((function(e){return{id:e.reference,name:e.name,type:e.type}}))}):(t.push({id:"enable",name:e.name_enable,settings:e.inputs.map((function(e){return{id:e.reference,name:e.name,type:e.type}}))}),t.push({id:"disable",name:e.name_disable,settings:e.inputs.map((function(e){return{id:e.reference,name:e.name,type:e.type}}))})),i.push({id:e.id,name:"Processus "+e.reference,actions:t,type:"process"})})),e.abrupt("return",{data:i,error:!1,package:"",message:""});case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ve=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={icons:[],mode:"normal"},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/admin/ressource/icon.json");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,this.setState({icons:n}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.setState({icons:[]});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsxs)(fe.a,{container:!0,spacing:1,style:{width:"32vw",height:"32vw",padding:10,marginRight:10},children:[Object(O.jsx)(fe.a,{item:!0,xs:6,children:Object(O.jsx)(p.a,{onClick:function(){e.setState({mode:"normal"})},style:{cursor:"pointer",display:"flex",justifyContent:"center",alignContent:"center",padding:5,alignItems:"center",alignSelf:"center"},children:Object(O.jsx)("img",{style:{height:30,width:30,alignSelf:"center",filter:"invert(100%)"},src:"/admin/ressource/icon/star.svg"})})}),Object(O.jsx)(fe.a,{item:!0,xs:6,children:Object(O.jsx)(p.a,{onClick:function(){e.setState({mode:"outline"})},style:{cursor:"pointer",display:"flex",justifyContent:"center",alignContent:"center",padding:5,alignItems:"center",alignSelf:"center"},children:Object(O.jsx)("img",{style:{height:30,width:30,alignSelf:"center",filter:"invert(100%)"},src:"/admin/ressource/icon/star-outline.svg"})})}),this.state.icons.filter((function(t){return-1!=t.search("outline")&&"outline"==e.state.mode||-1==t.search("outline")&&"normal"==e.state.mode})).map((function(t){return Object(O.jsx)(fe.a,{item:!0,xs:!0,children:Object(O.jsx)(p.a,{onClick:function(){e.props.onSelect&&e.props.onSelect(t)},style:{cursor:"pointer",display:"flex",justifyContent:"center",alignContent:"center",padding:5,alignItems:"center",alignSelf:"center"},children:Object(O.jsx)("img",{style:{height:30,width:30,alignSelf:"center",filter:"invert(100%)"},src:"/admin/ressource/icon/"+t+".svg"})})})}))]})}}]),n}(s.a.Component),Oe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={enabled:!1,popup:!1,message:"",espaces:[],reference:"",icon:"",description:"",name:"",name_disable:"",name_enable:"",mode:"simple",module:null,espace:!1,inputReference:"",inputName:"",inputType:null,inputMode:!1,inputs:[],sources:[],isChecked:!1,action:null,source:null,arrSources:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.getSource(["smartobject","module"]);case 2:return t=e.sent,e.next=5,(new W).get().fetch("/api/espaces");case 5:n=e.sent,t.error?this.setState({enabled:!0,message:t.package+" : "+t.message}):n.error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.setState({enabled:!1,message:"",espaces:n.data,sources:t.data});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSource",value:function(e){var t=!1;this.state.sources.forEach((function(n){n.id===e&&(t=n)})),this.setState({source:t})}},{key:"setAction",value:function(e){var t=!1;this.state.source.actions.forEach((function(n){n.id===e&&(t=n)})),this.setState({action:t})}},{key:"setInput",value:function(){if(""!==this.state.inputReference)if(""!==this.state.inputType)if(""!==this.state.inputName){var e=this.state.inputs;e.push({name:this.state.inputName,type:this.state.inputType,reference:this.state.inputReference,enable:this.state.inputMode?1:0}),this.setState({inputs:e,inputName:"",inputType:null,inputReference:"",inputMode:!1})}else this.setState({enabled:!0,message:"Name is missing"});else this.setState({enabled:!0,message:"Type is missing"});else this.setState({enabled:!0,message:"Reference is missing"})}},{key:"set",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.state.reference){e.next=3;break}return this.setState({enabled:!0,message:"Reference is missing"}),e.abrupt("return");case 3:if(""!==this.state.icon){e.next=6;break}return this.setState({enabled:!0,message:"Icon is missing"}),e.abrupt("return");case 6:if(""!==this.state.description){e.next=9;break}return this.setState({enabled:!0,message:"Description is missing"}),e.abrupt("return");case 9:if(!1!==this.state.espace){e.next=12;break}return this.setState({enabled:!0,message:"Espace is missing"}),e.abrupt("return");case 12:return t={description:this.state.description,nameEnable:this.state.name_enable,nameDisable:this.state.name_disable,name:this.state.name,espace:this.state.espace,sources:this.state.arrSources,reference:this.state.reference,icon:this.state.icon,mode:this.state.mode,inputs:this.state.inputs},e.next=15,(new W).post(t).fetch("/api/process");case 15:(n=e.sent).error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.props.history.push("/process");case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateAction",value:function(e,t){var n={};n["argument-"+e.id]=t,this.setState(n)}},{key:"removeModeArgument",value:function(e){var t=[];this.state.inputs.forEach((function(n,a){e!==a&&t.push(n)})),this.setState({inputs:t})}},{key:"confirmationModule",value:function(){if(!1!==this.state.action)if(0!==this.state.source.actions.length){for(var e=[],t=0;t<this.state.action.settings.length;t++){var n=this.state.action.settings[t],a=this.state["argument-"+n.id];void 0==a&&(a=n.default),e.push({reference:n.id,value:a})}var s={source:this.state.source,action:this.state.action,arguments:e,enable:this.state.isChecked},i=this.state.arrSources;i.push(s),this.setState({arrSources:i,action:null,source:null,isChecked:!1})}else this.setState({enabled:!0,message:"Module missing"});else this.setState({enabled:!0,message:"Action missing"})}},{key:"removeSource",value:function(e){var t=this,n=[];this.state.arrSources.forEach((function(t,a){e!==a&&n.push(t)})),this.setState({arrSources:[]},(function(){t.setState({arrSources:n})}))}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsxs)(p.a,{elevation:2,style:{padding:10,justifyContent:"left"},children:[Object(O.jsxs)("div",{style:{justifyContent:"start",alignSelf:"start",alignContent:"start",alignItems:"start",padding:10},children:[Object(O.jsx)(g.a,{onChange:function(t){e.setState({reference:t.nativeEvent.target.value})},style:{width:"20%",margin:10},label:"R\xe9ference",value:this.state.reference,variant:"outlined"}),Object(O.jsx)(g.a,{onChange:function(t){e.setState({icon:t.nativeEvent.target.value})},style:{width:"20%",margin:10},label:"Icon",variant:"outlined",value:this.state.icon,InputProps:{endAdornment:Object(O.jsx)(pe.a,{position:"end",children:Object(O.jsx)(B.a,{onClick:function(){e.setState({popup:!0})},style:{margin:0,padding:0},children:Object(O.jsx)(me.a,{})})})}}),Object(O.jsx)(ge.a,{open:this.state.popup,onClose:function(){e.setState({popup:!1})},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(O.jsx)(ve,{onSelect:function(t){e.setState({icon:t,popup:!1})}})}),Object(O.jsx)(g.a,{onChange:function(t){e.setState({description:t.nativeEvent.target.value})},style:{width:"50%",margin:10},label:"Description",variant:"outlined"}),Object(O.jsxs)(K.a,{variant:"outlined",style:{margin:10,width:"150px"},children:[Object(O.jsx)(X.a,{children:"Espace"}),Object(O.jsx)(Y.a,{onChange:function(t){e.setState({espace:t.target.value})},label:"Espace",children:this.state.espaces.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}),Object(O.jsx)(T.a,{variant:"h5",style:{margin:10},children:"Mode"}),Object(O.jsxs)(fe.a,{style:{margin:10},container:!0,alignItems:"center",children:[Object(O.jsx)(fe.a,{item:!0,children:Object(O.jsx)(T.a,{variant:"subtitle1",children:"Simple"})}),Object(O.jsx)(fe.a,{item:!0,children:Object(O.jsx)(_.a,{checked:"switch"===this.state.mode,onChange:function(t,n){e.setState({mode:n?"switch":"simple"})},name:"checkedC"})}),Object(O.jsx)(fe.a,{item:!0,children:Object(O.jsx)(T.a,{variant:"subtitle1",children:"Switch"})})]}),Object(O.jsx)(D.a,{style:{padding:10,margin:10},component:p.a,children:"switch"===this.state.mode?Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsx)(g.a,{onChange:function(t){e.setState({name_enable:t.nativeEvent.target.value})},style:{width:"45%",margin:10},label:"Texte actif",variant:"outlined"}),Object(O.jsx)(g.a,{onChange:function(t){e.setState({name_disable:t.nativeEvent.target.value})},style:{width:"45%",margin:10},label:"Texte passif",variant:"outlined"})]}):Object(O.jsx)("div",{children:Object(O.jsx)(g.a,{onChange:function(t){e.setState({name:t.nativeEvent.target.value})},style:{margin:10,width:"45%"},label:"Texte",variant:"outlined"})})}),Object(O.jsx)(T.a,{variant:"h5",style:{margin:10},children:"Argument"}),Object(O.jsxs)(D.a,{style:{padding:10,margin:10},component:p.a,children:[Object(O.jsx)(g.a,{value:this.state.inputReference,onChange:function(t){e.setState({inputReference:t.nativeEvent.target.value})},style:{width:"30%",margin:10},label:"Reference",variant:"outlined"}),Object(O.jsx)(g.a,{value:this.state.inputName,onChange:function(t){e.setState({inputName:t.nativeEvent.target.value})},style:{width:"30%",margin:10},label:"Name",variant:"outlined"}),Object(O.jsxs)(K.a,{variant:"outlined",style:{margin:10,width:"25%"},children:[Object(O.jsx)(X.a,{children:"Type"}),Object(O.jsxs)(Y.a,{value:this.state.inputType,onChange:function(t){e.setState({inputType:t.target.value})},label:"Type",children:[Object(O.jsx)(Z.a,{value:"text",children:"Text"}),Object(O.jsx)(Z.a,{value:"colorpicker",children:"Color picker"}),Object(O.jsx)(Z.a,{value:"number",children:"Number"}),Object(O.jsx)(Z.a,{value:"slider",children:"Slider"})]})]}),"switch"===this.state.mode?Object(O.jsx)(ee.a,{onChange:function(t,n){e.setState({inputMode:n})}}):null,Object(O.jsx)(f.a,{style:{margin:10},onClick:function(){e.setInput()},variant:"outlined",children:"Ajouter"}),Object(O.jsx)(R.a,{children:Object(O.jsx)(P.a,{children:this.state.inputs.map((function(t,n){return Object(O.jsxs)(A.a,{onClick:function(){},hover:!0,style:{cursor:"pointer"},children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:t.reference})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:t.name})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:t.type})}),"switch"===e.state.mode?Object(O.jsx)(I.a,{align:"center",children:Object(O.jsx)(ee.a,{disabled:!0,defaultChecked:t.mode})}):null,Object(O.jsx)(I.a,{align:"right",children:Object(O.jsx)(B.a,{onClick:function(){e.removeModeArgument(n)},children:Object(O.jsx)(H.a,{})})})]})}))})})]}),Object(O.jsx)(T.a,{variant:"h5",style:{margin:10},children:"Action "}),Object(O.jsx)(D.a,{style:{padding:10,margin:10},component:p.a,children:Object(O.jsx)(R.a,{children:Object(O.jsxs)(P.a,{children:[this.state.arrSources.map((function(t,n){return Object(O.jsxs)(A.a,{onClick:function(){},hover:!0,style:{cursor:"pointer"},children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:t.source.name})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:t.action.name})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:t.arguments.map((function(e){return Object(O.jsx)(T.a,{variant:"body1",children:e.reference+" : "+e.value})}))})}),"simple"===e.state.mode?null:Object(O.jsx)(I.a,{align:"center",children:Object(O.jsx)(ee.a,{disabled:!0,defaultChecked:t.enable})}),Object(O.jsx)(I.a,{align:"center",children:Object(O.jsx)(B.a,{onClick:function(){e.removeSource(n)},children:Object(O.jsx)(H.a,{})})})]})})),Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",style:{minWidth:"30%"},children:Object(O.jsxs)(K.a,{fullWidth:!0,children:[Object(O.jsx)(X.a,{children:"Source"}),Object(O.jsx)(Y.a,{value:this.state.source?this.state.source.id:null,onChange:function(t){e.setSource(t.target.value)},label:"Connexion",children:this.state.sources.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]})}),Object(O.jsx)(I.a,{align:"left",style:{width:"30%"},children:this.state.source?Object(O.jsxs)(K.a,{fullWidth:!0,children:[Object(O.jsx)(X.a,{children:"Action"}),Object(O.jsx)(Y.a,{value:this.state.action?this.state.action.id:null,onChange:function(t){e.setAction(t.target.value)},label:"Connexion",children:this.state.source.actions.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}):null}),Object(O.jsxs)(I.a,{align:"left",style:{width:"30%"},children:[Object(O.jsx)("div",{}),this.state.action?this.state.action.settings.map((function(t){return Object(O.jsx)("div",{style:{marginLeft:10,marginRight:10,marginTop:5,marginBottom:2},children:Object(O.jsx)(g.a,{variant:"outlined",placeholder:t.id,onChange:function(n){e.updateAction(t,n.currentTarget.value,e.state.action)}})})})):null]}),"simple"===this.state.mode?null:Object(O.jsx)(I.a,{align:"center",children:Object(O.jsx)(ee.a,{onChange:function(t,n){e.setState({isChecked:n})}})})]}),Object(O.jsx)(f.a,{style:{margin:10},onClick:function(){e.confirmationModule()},variant:"outlined",children:"Ajouter"})]})})})]}),Object(O.jsx)(f.a,{style:{margin:10},onClick:function(){e.set()},variant:"outlined",children:"Save"})]}),Object(O.jsxs)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:[" ",this.state.message," "]})]})}}]),n}(s.a.Component),ye=n(139),we=n(142),Se=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={id:e.match.params.id,enabled:!1,message:"",process:null,profiles:[],executeInformation:"",referenceInput:"",nameInput:"",typeInput:null,modeInput:0,action:null,source:null,loading:!1,isChecked:!1,sources:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.getSource(["smartobject","module"]);case 2:return t=e.sent,e.next=5,(new W).get().fetch("/api/espaces");case 5:return n=e.sent,e.next=8,(new W).get().fetch("/api/profiles");case 8:return a=e.sent,e.next=11,(new W).get().fetch("/api/process/"+this.state.id);case 11:s=e.sent,n.error?this.setState({enabled:!0,message:n.package+" : "+n.message}):s.error?this.setState({enabled:!0,message:s.package+" : "+s.message}):this.setState({process:s.data,profiles:a.data,espaces:n.data,sources:t.data}),this.setState({loading:null});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSource",value:function(e){var t=!1;this.state.sources.forEach((function(n){n.id===e&&(t=n)})),this.setState({source:t})}},{key:"setAction",value:function(e){var t=!1;this.state.source.actions.forEach((function(n){n.id===e&&(t=n)})),this.setState({action:t})}},{key:"addSource",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,s,i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.state.action){e.next=3;break}return this.setState({enabled:!0,message:"Action missing"}),e.abrupt("return");case 3:if(null!=this.state.source){e.next=6;break}return this.setState({enabled:!0,message:"Source missing"}),e.abrupt("return");case 6:for(t=[],n=0;n<this.state.action.settings.length;n++)a=this.state.action.settings[n],void 0==(s=this.state["argument-"+a.id])&&(s=a.default),t.push({reference:a.id,value:s});return i={source:this.state.source,action:this.state.action,arguments:t,enable:this.state.isChecked},e.next=11,(new W).post(i).fetch("/api/process/"+this.state.id+"/actions");case 11:(r=e.sent).error?this.setState({enabled:!0,message:r.package+" : "+r.message}):this.componentDidMount();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteSource",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).delete().fetch("/api/process/"+this.state.id+"/actions/"+t);case 2:(n=e.sent).error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).delete().fetch("/api/process/"+t);case 2:(n=e.sent).error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.props.history.push("/process");case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"executeAction",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.setState({loading:!0}),t={},n=0;n<this.state.process.inputs.length;n++)a=this.state.process.inputs[n],void 0==(s=this.state["argument-"+a.id])&&(s=a.default),t[a.reference]=s;return e.next=5,(new W).post({inputs:t}).fetch("/api/process/"+this.state.process.id+"/execute");case 5:(i=e.sent).error?this.setState({loading:null,enabled:!0,message:i.package+" : "+i.message}):(i.data&&this.setState({executeInformation:JSON.stringify(i.data)}),this.componentDidMount());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"insertProfile",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).post({idProfile:n.id}).fetch("/api/process/"+t.id+"/profiles");case 2:(a=e.sent).error?this.setState({enabled:!0,message:a.package+" : "+a.message}):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteProfile",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).delete().fetch("/api/process/"+t.id+"/profiles/"+n.id);case 2:(a=e.sent).error?this.setState({enabled:!0,message:a.package+" : "+a.message}):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteProcessInput",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).delete({}).fetch("/api/process/"+this.state.process.id+"/inputs/"+t.id);case 2:(n=e.sent).error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"insertProcessInput",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.state.typeInput){e.next=3;break}return this.setState({enabled:!0,message:"Missing-parameter : type is empty"}),e.abrupt("return");case 3:return e.next=5,(new W).post({reference:this.state.referenceInput,name:this.state.nameInput,type:this.state.typeInput,enable:this.state.modeInput}).fetch("/api/process/"+this.state.process.id+"/inputs");case 5:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):(this.setState({referenceSettings:"",valueSettings:"",referenceInput:"",nameInput:"",modeInput:0}),this.componentDidMount());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateAction",value:function(e,t){var n={};n["argument-"+e.id]=t,this.setState(n)}},{key:"render",value:function(){var e=this;return this.state.process?Object(O.jsxs)("div",{children:[Object(O.jsxs)(p.a,{elevation:2,style:{padding:25},children:[Object(O.jsx)(T.a,{variant:"h4",children:this.state.process.reference}),Object(O.jsx)(T.a,{variant:"subtitle1",children:this.state.process.espace.name}),Object(O.jsx)(T.a,{variant:"subtitle1",children:this.state.process.description}),Object(O.jsx)(F.a,{style:{marginTop:10,marginBottom:10}}),Object(O.jsxs)("div",{children:[Object(O.jsx)(T.a,{variant:"h5",style:{marginBottom:5},children:"Action"}),"simple"==this.state.process.mode?"simple"===this.state.process.mode?Object(O.jsx)(f.a,{disabled:this.state.loading,style:{alignSelf:"center",marginTop:10},variant:2===this.state.process.enable?"contained":"outlined",onClick:function(){e.executeAction()},color:"default",startIcon:Object(O.jsx)(ye.a,{}),children:this.state.process.name}):null:Object(O.jsx)("div",{style:{flexDirection:"column",display:"flex",width:"20%"},children:1==this.state.process.enable?Object(O.jsx)(f.a,{disabled:this.state.loading,style:{marginTop:10},variant:"contained",onClick:function(){e.executeAction()},color:"default",children:this.state.process.name_enable}):Object(O.jsx)(f.a,{disabled:this.state.loading,style:{marginTop:10},variant:"outlined",onClick:function(){e.executeAction()},color:"default",children:this.state.process.name_disable})})]}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"row",marginTop:10,marginBottom:10},children:this.state.process.inputs.filter((function(t){return t.enable==e.state.process.enable})).map((function(t){return Object(O.jsx)(de,{setState:e.setState.bind(e),action:t,flexDirection:"column",orientation:"horizontal"})}))}),Object(O.jsxs)("div",{style:{marginTop:15},children:[Object(O.jsx)(T.a,{variant:"h5",children:"Input"}),Object(O.jsx)("div",{style:{flexDirection:"column",display:"flex",width:"100%",marginTop:10},children:Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsx)(R.a,{children:Object(O.jsxs)(P.a,{children:[this.state.process.inputs.map((function(t){return Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:t.reference})}),Object(O.jsxs)(I.a,{align:"left",children:[Object(O.jsx)(T.a,{variant:"body1",children:t.name})," "]}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:t.type})}),Object(O.jsx)(I.a,{align:"center",children:Object(O.jsx)(T.a,{variant:"body1",children:t.enable})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(B.a,{onClick:function(){e.deleteProcessInput(t)},style:{borderRadius:5,margin:0},children:Object(O.jsx)(H.a,{})})})]},t.id)})),Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",style:{width:"35%"},children:Object(O.jsx)(g.a,{value:this.state.referenceInput,onChange:function(t){e.setState({referenceInput:t.nativeEvent.target.value})},placeholder:"Reference",style:{width:"100%"}})}),Object(O.jsx)(I.a,{align:"left",style:{width:"35%"},children:Object(O.jsx)(g.a,{value:this.state.nameInput,onChange:function(t){e.setState({nameInput:t.nativeEvent.target.value})},placeholder:"Name",style:{width:"100%"}})}),Object(O.jsx)(I.a,{align:"left",style:{width:"20%"},children:Object(O.jsxs)(K.a,{variant:"outlined",style:{width:"100%"},children:[Object(O.jsx)(X.a,{children:"Type"}),Object(O.jsxs)(Y.a,{value:this.state.typeInput,onChange:function(t){e.setState({typeInput:t.target.value})},label:"Type",children:[Object(O.jsx)(Z.a,{value:"text",children:"Text"}),Object(O.jsx)(Z.a,{value:"colorpicker",children:"Color picker"}),Object(O.jsx)(Z.a,{value:"number",children:"Number"}),Object(O.jsx)(Z.a,{value:"slider",children:"Slider"})]})]})}),Object(O.jsx)(I.a,{align:"center",style:{width:"10%"},children:"switch"===this.state.process.mode?Object(O.jsx)(ee.a,{value:0==this.state.modeInput,onChange:function(t,n){e.setState({modeInput:n?1:0})}}):null}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(B.a,{onClick:function(){e.insertProcessInput()},style:{borderRadius:5,margin:0},children:Object(O.jsx)(C.a,{})})})]},-1)]})})})})]}),Object(O.jsxs)("div",{style:{marginTop:15},children:[Object(O.jsx)(T.a,{variant:"h5",children:"Module"}),Object(O.jsxs)("div",{style:{flexDirection:"column",display:"flex",width:"100%",marginTop:10},children:[Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsxs)(R.a,{children:[Object(O.jsx)(M.a,{children:Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:"Module"})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:"Type"})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:"Action"})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:"Arguments"})}),Object(O.jsx)(I.a,{align:"center",children:Object(O.jsx)(T.a,{variant:"body1",children:"Mode"})}),Object(O.jsx)(I.a,{align:"left"})]})}),Object(O.jsx)(P.a,{children:this.state.process.actions.map((function(t){return Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",style:{width:"15%"},children:Object(O.jsx)(T.a,{variant:"body1",children:t.object})}),Object(O.jsxs)(I.a,{align:"left",style:{width:"20%"},children:[Object(O.jsx)(T.a,{variant:"body1",children:t.type})," "]}),Object(O.jsx)(I.a,{align:"left",style:{width:"20%"},children:Object(O.jsx)(T.a,{variant:"body1",children:t.action})}),Object(O.jsx)(I.a,{align:"left",style:{width:"20%"},children:t.arguments.map((function(e){return Object(O.jsx)(T.a,{variant:"body1",children:e.reference+" : "+e.value})}))}),Object(O.jsx)(I.a,{align:"center",style:{width:"15%"},children:0===t.enable?Object(O.jsx)(Q.a,{}):1===t.enable?Object(O.jsx)(we.a,{}):Object(O.jsx)(ye.a,{})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(B.a,{onClick:function(){e.deleteSource(t.id)},children:Object(O.jsx)(H.a,{})})})]},t.id)}))})]})}),Object(O.jsx)(D.a,{style:{marginTop:15},component:p.a,children:Object(O.jsx)(R.a,{children:Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",style:{width:"25%"},children:Object(O.jsxs)(K.a,{fullWidth:!0,children:[Object(O.jsx)(X.a,{children:"Source"}),Object(O.jsx)(Y.a,{value:this.state.source?this.state.source.id:null,onChange:function(t){e.setSource(t.target.value)},label:"Connexion",children:this.state.sources.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]})}),Object(O.jsx)(I.a,{align:"left",style:{width:"25%"},children:this.state.source?Object(O.jsxs)(K.a,{fullWidth:!0,children:[Object(O.jsx)(X.a,{children:"Action"}),Object(O.jsx)(Y.a,{value:this.state.action?this.state.action.id:null,onChange:function(t){e.setAction(t.target.value)},label:"Connexion",children:this.state.source.actions.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}):null}),Object(O.jsx)(I.a,{align:"left",style:{width:"20%"},children:this.state.action?this.state.action.settings.map((function(t){return Object(O.jsx)("div",{style:{marginLeft:10,marginRight:10,marginTop:5,marginBottom:2},children:Object(O.jsx)(g.a,{variant:"outlined",placeholder:t.id,onChange:function(n){e.updateAction(t,n.currentTarget.value,e.state.action)}})})})):null}),Object(O.jsx)(I.a,{align:"center",style:{width:"5%"},children:"switch"===this.state.process.mode?Object(O.jsx)(ee.a,{onChange:function(t,n){e.setState({isChecked:n})}}):null}),Object(O.jsx)(I.a,{align:"center",style:{width:"5%"},children:Object(O.jsx)(B.a,{onClick:function(){e.addSource()},children:Object(O.jsx)(C.a,{})})})]})})})]})]}),this.state.executeInformation.length>0?Object(O.jsx)("div",{style:{padding:10},children:Object(O.jsx)(y,{severity:"success",action:Object(O.jsx)(B.a,{onClick:function(){e.setState({executeInformation:""})},style:{alignSelf:"start"},color:"inherit",size:"small",children:Object(O.jsx)(Q.a,{})}),children:Object(O.jsx)(N.a,{id:"json-pretty",data:JSON.parse(this.state.executeInformation)})})}):null,Object(O.jsxs)("div",{style:{padding:10,paddingBottom:0},children:[Object(O.jsx)(T.a,{variant:"h5",children:"Authorization"}),this.state.profiles.map((function(t){var n=!1;return e.state.process.profiles.forEach((function(e){e.profile==t.id&&(n=!0)})),Object(O.jsx)(J.a,{style:{padding:1},children:Object(O.jsx)(V.a,{control:Object(O.jsx)(_.a,{checked:n,onChange:function(){n?e.deleteProfile(e.state.process,t):e.insertProfile(e.state.process,t)},color:"primary"}),label:t.name})})}))]})]}),Object(O.jsx)(p.a,{style:{width:"min-content",marginTop:10,alignContent:"center",justifyContent:"center",alignSelf:"center"},children:Object(O.jsx)(B.a,{onClick:function(){e.delete(e.state.process.id)},style:{borderRadius:5},children:Object(O.jsx)(H.a,{})})}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]}):Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})}}]),n}(s.a.Component),ke=n(156),Ce=n(154),Te=n(147),De=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={page:0,loading:!0,enabled:!1,message:"",routines:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).get().fetch("/api/routines");case 2:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.setState({enabled:!1,message:"",loading:!1,routines:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).delete().fetch("/api/routines/"+t);case 2:(n=e.sent).error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"duplicate",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).put().fetch("/api/routines/"+t+"/duplicate");case 2:(n=e.sent).error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateStatus",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).put({status:n}).fetch("/api/routines/"+t+"/status");case 2:(a=e.sent).error?this.setState({enabled:!0,message:a.package+" : "+a.message}):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsx)(R.a,{children:Object(O.jsx)(P.a,{children:this.state.routines.slice(10*this.state.page,10*(this.state.page+1)).map((function(t){return Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)("img",{style:{width:30,height:30,filter:"invert(100%)"},src:"/admin/ressource/icon/"+t.icon+".svg"})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:t.name})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsxs)("div",{style:{flex:1,flexDirection:"row",display:"flex",alignContent:"center",alignItems:"center",justifyContent:"end"},children:[Object(O.jsx)(B.a,{onClick:function(){e.updateStatus(t.id,0===t.status?1:0)},style:{borderRadius:3,padding:8,marginLeft:2,marginRight:2,backgroundColor:1===t.status?oe.palette.success.main:null},children:0===t.status?Object(O.jsx)(ke.a,{}):Object(O.jsx)(Ce.a,{})}),Object(O.jsx)(B.a,{onClick:function(){e.props.history.push("/routine/"+t.id)},style:{borderRadius:3,padding:8,marginLeft:2,marginRight:2},children:Object(O.jsx)(Te.a,{})}),Object(O.jsx)(B.a,{onClick:function(){e.duplicate(t.id)},style:{borderRadius:3,padding:8,marginLeft:2,marginRight:2},children:Object(O.jsx)(U.a,{})}),Object(O.jsx)(B.a,{onClick:function(){e.delete(t.id)},style:{borderRadius:3,padding:8,marginLeft:2,marginRight:2},children:Object(O.jsx)(H.a,{})})]})})]},t.id)}))})})}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignContent:"center",alignItems:"center"},children:[Object(O.jsx)(p.a,{style:{width:50,height:50,marginTop:10,padding:5,marginBottom:10,textAlign:"center",justifyContent:"space-around",alignContent:"center",alignItems:"center",display:"flex",flexDirection:"row"},children:Object(O.jsx)(w.b,{to:"/routine/new",style:{textDecoration:"none",color:"white"},children:Object(O.jsx)(B.a,{style:{borderRadius:0},children:Object(O.jsx)(C.a,{})})})}),Object(O.jsx)(E.a,{component:"div",count:this.state.routines.length,rowsPerPage:10,page:this.state.page,rowsPerPageOptions:[],onChangePage:function(t,n){e.setState({page:n})}})]}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]})}}]),n}(s.a.Component),Re=n(413),Me={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,backgroundColor:oe.palette.background.paper,padding:10,borderRadius:5},Ae=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state=Object(c.a)({enabled:!1,message:"",routine:null,sources:[],mode:"counter",modalTrigger:!1,modalEffect:!1},"routine",{watch:1,triggers:[],effects:[],name:"",icon:""}),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.getSource(["smartobject","process","module"]);case 2:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.setState({sources:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reset",value:function(){this.setState({action:null,source:null,result:null,statement:null,expected:null})}},{key:"setSource",value:function(e){var t=this;this.state.sources.map((function(n){n.id==e&&t.setState({source:n,action:null})}))}},{key:"setAction",value:function(e){var t=this;this.state.source.actions.map((function(n){n.id==e&&t.setState({action:n})}))}},{key:"updateIcon",value:function(e){var t=this.state.routine;t.icon=e,this.setState({routine:t})}},{key:"updateName",value:function(e){var t=this.state.routine;t.name=e,this.setState({routine:t})}},{key:"updateWatch",value:function(e){var t=this.state.routine;t.watch=e,this.setState({routine:t})}},{key:"addTrigger",value:function(){if(null==this.state.source)this.setState({enabled:!0,message:"Missing source"});else if(null==this.state.action)this.setState({enabled:!0,message:"Missing action"});else{for(var e=[],t=0;t<this.state.action.settings.length;t++){var n=this.state.action.settings[t],a=this.state["argument-"+n.id];void 0==a&&(a=n.default),e.push({reference:n.id,value:a})}var s=this.state.routine;s.triggers.push({source:this.state.source.id,type:this.state.source.type,action:this.state.action.id,arguments:e,result:this.state.result,statement:this.state.statement,expected:this.state.expected}),this.setState({routine:s,modalTrigger:!1,action:null,source:null,result:null,statement:null,expected:null})}}},{key:"addEffect",value:function(){if(null==this.state.source)this.setState({enabled:!0,message:"Missing source"});else if(null==this.state.action)this.setState({enabled:!0,message:"Missing action"});else{for(var e=[],t=0;t<this.state.action.settings.length;t++){var n=this.state.action.settings[t],a=this.state["argument-"+n.id];void 0==a&&(a=n.default),e.push({reference:n.id,value:a})}var s=this.state.routine;s.effects.push({source:this.state.source.id,type:this.state.source.type,action:this.state.action.id,arguments:e}),this.setState({routine:s,modalEffect:!1,action:null,source:null})}}},{key:"removeTrigger",value:function(e){var t=this.state.routine,n=t.triggers.filter((function(t,n){return n!=e}));t.triggers=n,this.setState({routine:t})}},{key:"removeEffect",value:function(e){var t=this.state.routine,n=t.effects.filter((function(t,n){return n!=e}));t.effects=n,this.setState({routine:t})}},{key:"save",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.routine.name.length){e.next=4;break}this.setState({enabled:!0,message:"Missing name"}),e.next=16;break;case 4:if(0!=this.state.routine.icon.length){e.next=8;break}this.setState({enabled:!0,message:"Missing icon"}),e.next=16;break;case 8:if(0!=this.state.routine.effects.length){e.next=12;break}this.setState({enabled:!0,message:"Missing effect"}),e.next=16;break;case 12:return e.next=14,(new W).post({name:this.state.routine.name,watch:this.state.routine.watch.toString(),icon:this.state.routine.icon,triggers:this.state.routine.triggers,effects:this.state.routine.effects,mode:this.state.mode}).fetch("/api/routines");case 14:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.props.history.push("/routine");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.routine?Object(O.jsxs)("div",{children:[Object(O.jsxs)(p.a,{elevation:2,style:{padding:10,justifyContent:"left"},children:[Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(O.jsx)(g.a,{onChange:function(t){e.updateName(t.nativeEvent.target.value)},style:{width:"49%"},value:this.state.routine.name,label:"Name",variant:"outlined"}),Object(O.jsx)(g.a,{onChange:function(t){e.updateIcon(t.nativeEvent.target.value)},value:this.state.routine.icon,label:"Icon",variant:"outlined",style:{width:"49%"},InputProps:{endAdornment:Object(O.jsx)(pe.a,{position:"end",children:Object(O.jsx)(B.a,{onClick:function(){e.setState({popup:!0})},style:{margin:0,padding:0},children:Object(O.jsx)(me.a,{})})})}}),Object(O.jsx)(ge.a,{open:this.state.popup,onClose:function(){e.setState({popup:!1})},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(O.jsx)(ve,{onSelect:function(t){e.setState({popup:!1}),e.updateIcon(t)}})})]}),"counter"==this.state.mode?Object(O.jsx)("div",{style:{marginBottom:10,marginTop:10,borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)"},children:Object(O.jsxs)("div",{style:{display:"flex",paddingTop:15,paddingBottom:15,paddingLeft:5,paddingRight:5},children:[Object(O.jsx)("div",{style:{flex:1},children:Object(O.jsx)(B.a,{size:"small",onClick:function(){e.setState({mode:"week"})},variant:"outlined",children:Object(O.jsx)(ne.a,{})})}),Object(O.jsx)("div",{style:{display:"flex",flex:20,justifyContent:"center"},children:Object(O.jsx)($.a,{defaultValue:0,valueLabelDisplay:"auto",orientation:"horizontal",min:0,max:1440,step:1,value:this.state.routine.watch,onChange:function(t,n){e.updateWatch(n)}})})]})}):Object(O.jsx)("div",{style:{marginBottom:10,marginTop:10,borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)"},children:Object(O.jsx)(ae,{onChange:function(t){e.updateWatch(t)},onChangeMode:function(){e.setState({mode:"counter"})}})})]}),Object(O.jsxs)("div",{style:{flexDirection:"row",display:"flex",marginTop:20},children:[Object(O.jsxs)("div",{style:{flex:1,padding:5},children:[Object(O.jsx)(T.a,{variant:"subtitle1",children:"Trigger"}),Object(O.jsxs)(Re.a,{style:{textTransform:"none",padding:15,marginTop:5,marginRight:10,borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)",height:"min-content"},children:["   ",this.state.routine.triggers.map((function(t,n){return Object(O.jsxs)("div",{onClick:function(){return e.removeTrigger(n)},style:{textTransform:"none",padding:15,marginTop:5,borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)",height:"min-content",marginBottom:10},children:[Object(O.jsxs)("div",{children:[Object(O.jsxs)(T.a,{variant:"body2",children:["Type : "+t.type," "]}),Object(O.jsx)(T.a,{variant:"body2",children:"Reference : "+t.source}),Object(O.jsx)(T.a,{variant:"body2",children:"Action : "+t.action}),t.arguments.length>0?Object(O.jsx)("div",{style:{marginLeft:20},children:t.arguments.map((function(e){return Object(O.jsxs)(T.a,{variant:"body2",children:[e.reference+" : "+e.value," "]})}))}):null]}),t.result&&t.statement&&t.expected?Object(O.jsxs)("div",{children:[Object(O.jsx)(T.a,{variant:"body2",children:"Pour condition"}),Object(O.jsxs)("div",{style:{marginLeft:20},children:[Object(O.jsx)(T.a,{variant:"body2",children:"Resultat : "+t.result}),Object(O.jsx)(T.a,{variant:"body2",children:"Condition : "+t.statement}),Object(O.jsx)(T.a,{variant:"body2",children:"Expected : "+t.expected})]})]}):null]})})),Object(O.jsx)(f.a,{onClick:function(){e.reset(),e.setState({modalTrigger:!0})},style:{width:"100%",borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)"},children:Object(O.jsx)(C.a,{})})]})]}),Object(O.jsxs)("div",{style:{flex:1,padding:5},children:[Object(O.jsx)(T.a,{variant:"subtitle1",children:"Effect"}),Object(O.jsxs)(Re.a,{style:{textTransform:"none",padding:15,marginTop:5,marginRight:10,borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)",height:"min-content"},children:[this.state.routine.effects.map((function(t,n){return Object(O.jsxs)("div",{onClick:function(){return e.removeEffect(n)},style:{textTransform:"none",padding:15,marginTop:5,borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)",height:"min-content",marginBottom:10},children:[Object(O.jsxs)(T.a,{variant:"body2",children:["Type : "+t.type," "]}),Object(O.jsx)(T.a,{variant:"body2",children:"Reference : "+t.source}),Object(O.jsx)(T.a,{variant:"body2",children:"Action : "+t.action}),t.arguments.length>0?Object(O.jsx)("div",{style:{marginLeft:20},children:t.arguments.map((function(e){return Object(O.jsxs)(T.a,{variant:"body2",children:[e.reference+" : "+e.value," "]})}))}):null]})})),Object(O.jsx)(f.a,{onClick:function(){e.reset(),e.setState({modalEffect:!0})},style:{width:"100%",borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)"},children:Object(O.jsx)(C.a,{})})]})]})]})]}),Object(O.jsx)(p.a,{style:{width:"min-content",height:"min-content",padding:2,alignContent:"center",alignItems:"center",justifyContent:"center",alignSelf:"center",marginTop:5},children:Object(O.jsx)(B.a,{onClick:function(){e.save()},style:{borderRadius:0},variant:"outlined",children:Object(O.jsx)(he.a,{})})}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message}),Object(O.jsx)(q.a,{open:this.state.modalTrigger,onClose:function(){e.reset(),e.setState({modalTrigger:!1})},children:Object(O.jsx)(G.a,{in:this.state.modalTrigger,children:Object(O.jsx)(p.a,{style:Me,children:Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsx)(T.a,{variant:"h5",children:"New Trigger"}),Object(O.jsxs)(K.a,{variant:"outlined",style:{marginTop:5,marginBottom:5},children:[Object(O.jsx)(X.a,{children:"Source"}),Object(O.jsx)(Y.a,{placeholder:"Source",style:{width:"100%"},value:this.state.source?this.state.source.id:null,onChange:function(t){e.setSource(t.target.value)},label:"Source",children:this.state.sources.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}),this.state.source?Object(O.jsxs)(K.a,{variant:"outlined",style:{marginTop:5,marginBottom:5},children:[Object(O.jsx)(X.a,{children:"Action"}),Object(O.jsx)(Y.a,{placeholder:"Action",style:{width:"100%"},value:this.state.action?this.state.action.id:null,onChange:function(t){e.setAction(t.target.value)},label:"Source",children:this.state.source.actions.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}):null,this.state.action&&this.state.action.settings.length>0?Object(O.jsx)("div",{style:{marginBottom:10,marginTop:10,borderStyle:"solid",paddingLeft:10,paddingRight:10,borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)"},children:Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",paddingTop:10,paddingBottom:10},children:this.state.action.settings.map((function(t){return Object(O.jsx)("div",{style:{marginTop:5,marginBottom:5},children:Object(O.jsx)(de,{flexDirection:"column",orientation:"horizontal",setState:e.setState.bind(e),action:t})})}))})}):null,Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsx)("div",{style:{marginBottom:10,marginTop:10,flex:1},children:Object(O.jsx)(g.a,{variant:"outlined",placeholder:"Result",value:this.state.result,onChange:function(t){e.setState({result:t.currentTarget.value})},style:{width:"100%"}})}),Object(O.jsxs)(K.a,{variant:"outlined",style:{marginBottom:5,marginTop:5,flex:1},children:[Object(O.jsx)(X.a,{children:"Condition"}),Object(O.jsxs)(Y.a,{placeholder:"Action",style:{width:"100%"},value:this.state.statement,onChange:function(t){e.setState({statement:t.target.value})},label:"Source",children:[Object(O.jsx)(Z.a,{value:"equal",children:"="}),Object(O.jsx)(Z.a,{value:"smaller",children:"<"}),Object(O.jsx)(Z.a,{value:"bigger",children:">"}),Object(O.jsx)(Z.a,{value:"different",children:"<>"})]})]}),Object(O.jsx)("div",{style:{marginBottom:10,marginTop:10,flex:1},children:Object(O.jsx)(g.a,{variant:"outlined",placeholder:"Expected",value:this.state.expected,onChange:function(t){e.setState({expected:t.currentTarget.value})},style:{width:"100%"}})})]}),Object(O.jsx)(f.a,{onClick:function(){e.addTrigger()},variant:"outlined",style:{width:"minContent",marginTop:5},children:"Save"})]})})})}),Object(O.jsx)(q.a,{open:this.state.modalEffect,onClose:function(){e.reset(),e.setState({modalEffect:!1})},children:Object(O.jsx)(G.a,{in:this.state.modalEffect,children:Object(O.jsx)(p.a,{style:Me,children:Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsx)(T.a,{variant:"h5",children:"New effect"}),Object(O.jsxs)(K.a,{variant:"outlined",style:{marginTop:5,marginBottom:5},children:[Object(O.jsx)(X.a,{children:"Source"}),Object(O.jsx)(Y.a,{placeholder:"Source",style:{width:"100%"},value:this.state.source?this.state.source.id:null,onChange:function(t){e.setSource(t.target.value)},label:"Source",children:this.state.sources.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}),this.state.source?Object(O.jsxs)(K.a,{variant:"outlined",style:{marginTop:5,marginBottom:5},children:[Object(O.jsx)(X.a,{children:"Action"}),Object(O.jsx)(Y.a,{placeholder:"Action",style:{width:"100%"},value:this.state.action?this.state.action.id:null,onChange:function(t){e.setAction(t.target.value)},label:"Source",children:this.state.source.actions.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}):null,this.state.action&&this.state.action.settings.length>0?Object(O.jsx)("div",{style:{marginBottom:10,marginTop:10,borderStyle:"solid",paddingLeft:10,paddingRight:10,borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)"},children:Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",paddingTop:10,paddingBottom:10},children:this.state.action.settings.map((function(t){return Object(O.jsx)("div",{style:{marginTop:5,marginBottom:5},children:Object(O.jsx)(de,{flexDirection:"column",orientation:"horizontal",setState:e.setState.bind(e),action:t})})}))})}):null,Object(O.jsx)(f.a,{onClick:function(){e.addEffect()},variant:"outlined",style:{width:"minContent",marginTop:5},children:"Save"})]})})})})]}):Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})}}]),n}(s.a.Component),Ie={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,backgroundColor:oe.palette.background.paper,padding:10,borderRadius:5},Pe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={popup:!1,id:e.match.params.id,enabled:!1,message:"",routine:null,sources:[],modalTrigger:!1,modalEffect:!1,mode:"counter"},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.getSource(["smartobject","process","module"]);case 2:return t=e.sent,e.next=5,(new W).get().fetch("/api/routines/"+this.state.id);case 5:(n=e.sent).error?this.setState({enabled:!0,message:n.package+" : "+n.message}):t.error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.setState({mode:n.data.mode,routine:n.data,sources:t.data});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reset",value:function(){this.setState({action:null,source:null,result:null,statement:null,expected:null})}},{key:"setSource",value:function(e){var t=this;this.state.sources.map((function(n){n.id==e&&t.setState({source:n,action:null})}))}},{key:"setAction",value:function(e){var t=this;this.state.source.actions.map((function(n){n.id==e&&t.setState({action:n})}))}},{key:"updateIcon",value:function(e){var t=this.state.routine;t.icon=e,this.setState({routine:t})}},{key:"updateName",value:function(e){var t=this.state.routine;t.name=e,this.setState({routine:t})}},{key:"updateWatch",value:function(e){var t=this.state.routine;t.watch=e,this.setState({routine:t})}},{key:"addTrigger",value:function(){if(null==this.state.source)this.setState({enabled:!0,message:"Missing source"});else if(null==this.state.action)this.setState({enabled:!0,message:"Missing action"});else{for(var e=[],t=0;t<this.state.action.settings.length;t++){var n=this.state.action.settings[t],a=this.state["argument-"+n.id];void 0==a&&(a=n.default),e.push({reference:n.id,value:a})}var s=this.state.routine;s.triggers.push({source:this.state.source.id,type:this.state.source.type,action:this.state.action.id,arguments:e,result:this.state.result,statement:this.state.statement,expected:this.state.expected}),this.setState({routine:s,modalTrigger:!1,action:null,source:null,result:null,statement:null,expected:null})}}},{key:"addEffect",value:function(){if(null==this.state.source)this.setState({enabled:!0,message:"Missing source"});else if(null==this.state.action)this.setState({enabled:!0,message:"Missing action"});else{for(var e=[],t=0;t<this.state.action.settings.length;t++){var n=this.state.action.settings[t],a=this.state["argument-"+n.id];void 0==a&&(a=n.default),e.push({reference:n.id,value:a})}var s=this.state.routine;s.effects.push({source:this.state.source.id,type:this.state.source.type,action:this.state.action.id,arguments:e}),this.setState({routine:s,modalEffect:!1,action:null,source:null})}}},{key:"removeTrigger",value:function(e){var t=this.state.routine,n=t.triggers.filter((function(t,n){return n!=e}));t.triggers=n,this.setState({routine:t})}},{key:"removeEffect",value:function(e){var t=this.state.routine,n=t.effects.filter((function(t,n){return n!=e}));t.effects=n,this.setState({routine:t})}},{key:"save",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.routine.name.length){e.next=4;break}this.setState({enabled:!0,message:"Missing name"}),e.next=16;break;case 4:if(0!=this.state.routine.icon.length){e.next=8;break}this.setState({enabled:!0,message:"Missing icon"}),e.next=16;break;case 8:if(0!=this.state.routine.effects.length){e.next=12;break}this.setState({enabled:!0,message:"Missing effect"}),e.next=16;break;case 12:return e.next=14,(new W).put({name:this.state.routine.name,watch:this.state.routine.watch.toString(),icon:this.state.routine.icon,triggers:this.state.routine.triggers,effects:this.state.routine.effects,mode:this.state.mode}).fetch("/api/routines/"+this.state.id);case 14:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.props.history.push("/routine/");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.routine?Object(O.jsxs)("div",{children:[Object(O.jsxs)(p.a,{elevation:2,style:{padding:10,justifyContent:"left"},children:[Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(O.jsx)(g.a,{onChange:function(t){e.updateName(t.nativeEvent.target.value)},style:{width:"49%"},value:this.state.routine.name,label:"Name",variant:"outlined"}),Object(O.jsx)(g.a,{onChange:function(t){e.updateIcon(t.nativeEvent.target.value)},value:this.state.routine.icon,label:"Icon",variant:"outlined",style:{width:"49%"},InputProps:{endAdornment:Object(O.jsx)(pe.a,{position:"end",children:Object(O.jsx)(B.a,{onClick:function(){e.setState({popup:!0})},style:{margin:0,padding:0},children:Object(O.jsx)(me.a,{})})})}}),Object(O.jsx)(ge.a,{open:this.state.popup,onClose:function(){e.setState({popup:!1})},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(O.jsx)(ve,{onSelect:function(t){e.setState({popup:!1}),e.updateIcon(t)}})})]}),"counter"==this.state.mode?Object(O.jsx)("div",{style:{marginBottom:10,marginTop:10,borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)"},children:Object(O.jsxs)("div",{style:{display:"flex",paddingTop:15,paddingBottom:15,paddingLeft:5,paddingRight:5},children:[Object(O.jsx)("div",{style:{flex:1},children:Object(O.jsx)(B.a,{size:"small",onClick:function(){e.setState({mode:"week"})},variant:"outlined",children:Object(O.jsx)(ne.a,{})})}),Object(O.jsx)("div",{style:{display:"flex",flex:15,justifyContent:"center"},children:Object(O.jsx)($.a,{defaultValue:0,valueLabelDisplay:"auto",orientation:"horizontal",min:0,max:1440,step:1,value:this.state.routine.watch,onChange:function(t,n){e.updateWatch(n)}})})]})}):Object(O.jsx)("div",{style:{marginBottom:10,marginTop:10,borderStyle:"solid",borderRadius:3,borderWidth:.25,marginRight:10,borderColor:"rgba(255, 255, 255, 0.23)"},children:Object(O.jsx)(ae,{onChange:function(t){e.updateWatch(t)},onChangeMode:function(){e.setState({mode:"counter"})}})})]}),Object(O.jsxs)("div",{style:{flexDirection:"row",display:"flex",marginTop:20},children:[Object(O.jsxs)("div",{style:{flex:1,padding:5},children:[Object(O.jsx)(T.a,{variant:"subtitle1",children:"Trigger"}),Object(O.jsxs)(Re.a,{style:{textTransform:"none",padding:15,marginTop:5,marginRight:10,borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)",height:"min-content"},children:["   ",this.state.routine.triggers.map((function(t,n){return Object(O.jsxs)("div",{onClick:function(){return e.removeTrigger(n)},style:{textTransform:"none",padding:15,marginTop:5,borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)",height:"min-content",marginBottom:10},children:[Object(O.jsxs)("div",{children:[Object(O.jsxs)(T.a,{variant:"body2",children:["Type : "+t.type," "]}),Object(O.jsx)(T.a,{variant:"body2",children:"Reference : "+t.source}),Object(O.jsx)(T.a,{variant:"body2",children:"Action : "+t.action}),t.arguments.length>0?Object(O.jsx)("div",{style:{marginLeft:20},children:t.arguments.map((function(e){return Object(O.jsxs)(T.a,{variant:"body2",children:[e.reference+" : "+e.value," "]})}))}):null]}),t.result&&t.statement&&t.expected?Object(O.jsxs)("div",{children:[Object(O.jsx)(T.a,{variant:"body2",children:"Pour condition"}),Object(O.jsxs)("div",{style:{marginLeft:20},children:[Object(O.jsx)(T.a,{variant:"body2",children:"Resultat : "+t.result}),Object(O.jsx)(T.a,{variant:"body2",children:"Condition : "+t.statement}),Object(O.jsx)(T.a,{variant:"body2",children:"Expected : "+t.expected})]})]}):null]})})),Object(O.jsx)(f.a,{onClick:function(){e.reset(),e.setState({modalTrigger:!0})},style:{width:"100%",borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)"},children:Object(O.jsx)(C.a,{})})]})]}),Object(O.jsxs)("div",{style:{flex:1,padding:5},children:[Object(O.jsx)(T.a,{variant:"subtitle1",children:"Effect"}),Object(O.jsxs)(Re.a,{style:{textTransform:"none",padding:15,marginTop:5,marginRight:10,borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)",height:"min-content"},children:[this.state.routine.effects.map((function(t,n){return Object(O.jsxs)("div",{onClick:function(){return e.removeEffect(n)},style:{textTransform:"none",padding:15,marginTop:5,borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)",height:"min-content",marginBottom:10},children:[Object(O.jsxs)(T.a,{variant:"body2",children:["Type : "+t.type," "]}),Object(O.jsx)(T.a,{variant:"body2",children:"Reference : "+t.source}),Object(O.jsx)(T.a,{variant:"body2",children:"Action : "+t.action}),t.arguments.length>0?Object(O.jsx)("div",{style:{marginLeft:20},children:t.arguments.map((function(e){return Object(O.jsxs)(T.a,{variant:"body2",children:[e.reference+" : "+e.value," "]})}))}):null]})})),Object(O.jsx)(f.a,{onClick:function(){e.reset(),e.setState({modalEffect:!0})},style:{width:"100%",borderStyle:"solid",borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)"},children:Object(O.jsx)(C.a,{})})]})]})]})]}),Object(O.jsx)(p.a,{style:{width:"min-content",height:"min-content",padding:2,alignContent:"center",alignItems:"center",justifyContent:"center",alignSelf:"center",marginTop:5},children:Object(O.jsx)(B.a,{onClick:function(){e.save()},style:{borderRadius:0},variant:"outlined",children:Object(O.jsx)(he.a,{})})}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message}),Object(O.jsx)(q.a,{open:this.state.modalTrigger,onClose:function(){e.reset(),e.setState({modalTrigger:!1})},children:Object(O.jsx)(G.a,{in:this.state.modalTrigger,children:Object(O.jsx)(p.a,{style:Ie,children:Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsx)(T.a,{variant:"h5",children:"New Trigger"}),Object(O.jsxs)(K.a,{variant:"outlined",style:{marginTop:5,marginBottom:5},children:[Object(O.jsx)(X.a,{children:"Source"}),Object(O.jsx)(Y.a,{placeholder:"Source",style:{width:"100%"},value:this.state.source?this.state.source.id:null,onChange:function(t){e.setSource(t.target.value)},label:"Source",children:this.state.sources.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}),this.state.source?Object(O.jsxs)(K.a,{variant:"outlined",style:{marginTop:5,marginBottom:5},children:[Object(O.jsx)(X.a,{children:"Action"}),Object(O.jsx)(Y.a,{placeholder:"Action",style:{width:"100%"},value:this.state.action?this.state.action.id:null,onChange:function(t){e.setAction(t.target.value)},label:"Source",children:this.state.source.actions.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}):null,this.state.action&&this.state.action.settings.length>0?Object(O.jsx)("div",{style:{marginBottom:10,marginTop:10,borderStyle:"solid",paddingLeft:10,paddingRight:10,borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)"},children:Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",paddingTop:10,paddingBottom:10},children:this.state.action.settings.map((function(t){return Object(O.jsx)("div",{style:{marginTop:5,marginBottom:5},children:Object(O.jsx)(de,{setState:e.setState.bind(e),action:t,flexDirection:"column",orientation:"horizontal"})})}))})}):null,Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsx)("div",{style:{marginBottom:10,marginTop:10,flex:1},children:Object(O.jsx)(g.a,{variant:"outlined",placeholder:"Result",value:this.state.result,onChange:function(t){e.setState({result:t.currentTarget.value})},style:{width:"100%"}})}),Object(O.jsxs)(K.a,{variant:"outlined",style:{marginBottom:5,marginTop:5,flex:1},children:[Object(O.jsx)(X.a,{children:"Condition"}),Object(O.jsxs)(Y.a,{placeholder:"Action",style:{width:"100%"},value:this.state.statement,onChange:function(t){e.setState({statement:t.target.value})},label:"Source",children:[Object(O.jsx)(Z.a,{value:"equal",children:"="}),Object(O.jsx)(Z.a,{value:"smaller",children:"<"}),Object(O.jsx)(Z.a,{value:"bigger",children:">"}),Object(O.jsx)(Z.a,{value:"different",children:"<>"})]})]}),Object(O.jsx)("div",{style:{marginBottom:10,marginTop:10,flex:1},children:Object(O.jsx)(g.a,{variant:"outlined",placeholder:"Expected",value:this.state.expected,onChange:function(t){e.setState({expected:t.currentTarget.value})},style:{width:"100%"}})})]}),Object(O.jsx)(f.a,{onClick:function(){e.addTrigger()},variant:"outlined",style:{width:"minContent",marginTop:5},children:"Save"})]})})})}),Object(O.jsx)(q.a,{open:this.state.modalEffect,onClose:function(){e.reset(),e.setState({modalEffect:!1})},children:Object(O.jsx)(G.a,{in:this.state.modalEffect,children:Object(O.jsx)(p.a,{style:Ie,children:Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsx)(T.a,{variant:"h5",children:"New effect"}),Object(O.jsxs)(K.a,{variant:"outlined",style:{marginTop:5,marginBottom:5},children:[Object(O.jsx)(X.a,{children:"Source"}),Object(O.jsx)(Y.a,{placeholder:"Source",style:{width:"100%"},value:this.state.source?this.state.source.id:null,onChange:function(t){e.setSource(t.target.value)},label:"Source",children:this.state.sources.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}),this.state.source?Object(O.jsxs)(K.a,{variant:"outlined",style:{marginTop:5,marginBottom:5},children:[Object(O.jsx)(X.a,{children:"Action"}),Object(O.jsx)(Y.a,{placeholder:"Action",style:{width:"100%"},value:this.state.action?this.state.action.id:null,onChange:function(t){e.setAction(t.target.value)},label:"Source",children:this.state.source.actions.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}):null,this.state.action&&this.state.action.settings.length>0?Object(O.jsx)("div",{style:{marginBottom:10,marginTop:10,borderStyle:"solid",paddingLeft:10,paddingRight:10,borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)"},children:Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",paddingTop:10,paddingBottom:10},children:this.state.action.settings.map((function(t){return Object(O.jsx)("div",{style:{marginTop:5,marginBottom:5},children:Object(O.jsx)(de,{setState:e.setState.bind(e),action:t})})}))})}):null,Object(O.jsx)(f.a,{onClick:function(){e.addEffect()},variant:"outlined",style:{width:"minContent",marginTop:5},children:"Save"})]})})})})]}):Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})}}]),n}(s.a.Component),Be=n(65),Ee=n.n(Be),We=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={page:0,enabled:!1,message:"",modules:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).get().fetch("/api/configurations/module");case 2:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.setState({enabled:!1,message:"",modules:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsxs)(R.a,{children:[Object(O.jsx)(M.a,{children:Object(O.jsx)(A.a,{children:Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:"Identifiant"})})})}),Object(O.jsx)(P.a,{children:this.state.modules.slice(10*this.state.page,10*(this.state.page+1)).map((function(e){return Object(O.jsx)(w.b,{to:"/module/"+Ee()(e.name),style:{textDecoration:"none",color:"white",display:"contents"},children:Object(O.jsx)(A.a,{hover:!0,style:{cursor:"pointer"},children:Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:e.name})})},e.reference)})}))})]})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignContent:"center",alignItems:"center"},children:Object(O.jsx)(E.a,{component:"div",count:this.state.modules.length,rowsPerPage:10,page:this.state.page,rowsPerPageOptions:[],onChangePage:function(t,n){e.setState({page:n})}})}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]})}}]),n}(s.a.Component),ze=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={hashId:e.match.params.id,loading:null,module:null,enabled:!1,message:"",executeInformation:"",severity:"error"},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).get().fetch("/api/configurations/module");case 2:(t=e.sent).error?(this.setState({enabled:!0,severity:"error",message:t.package+" : "+t.message}),this.props.history.push("/module")):(n=!1,t.data.forEach((function(e){Ee()(e.name)==a.state.hashId&&(n=e)})),n?this.setState({module:n}):this.props.history.push("/module")),this.setState({loading:null});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"executeAction",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,s,i,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.setState({loading:t}),a={},s=0;s<n.length;s++)i=n[s],void 0==(r=this.state["argument-"+i.id])&&(r=i.default),a[i.id]=r;return e.next=5,(new W).post({settings:a,reference:this.state.module.reference}).fetch("/api/modules/"+Ee()(this.state.module.name)+"/actions/"+t);case 5:(c=e.sent).error?(this.setState({enabled:!0,severity:"error",message:c.package+" : "+c.message}),this.setState({loading:null})):(c.data?this.setState({executeInformation:JSON.stringify(c.data)}):this.setState({enabled:!0,severity:"success",message:"Success"}),this.componentDidMount());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.module?Object(O.jsxs)("div",{children:[Object(O.jsxs)(p.a,{elevation:2,style:{padding:10,marginBottom:10,justifyContent:"left"},children:[Object(O.jsxs)("div",{style:{padding:10},children:[Object(O.jsx)(T.a,{variant:"h4",children:this.state.module.name.split("/")[1]}),Object(O.jsx)(T.a,{variant:"subtitle1",children:this.state.module.name})]}),Object(O.jsx)(F.a,{}),Object(O.jsx)("div",{style:{padding:10,paddingBottom:0},children:this.state.module.actions.map((function(t){return Object(O.jsxs)(p.a,{style:{marginTop:10,marginBottom:10,display:"flex",flexDirection:"column",padding:10},children:[Object(O.jsx)(f.a,{disabled:e.state.loading==t.id,onClick:function(){e.executeAction(t.id,t.settings)},variant:e.state.loading==t.id?"contained":"outlined",style:{width:"250px",height:"100%"},children:t.name}),t.settings.length>0?Object(O.jsx)("div",{style:{display:"flex",flexDirection:"row",marginTop:10,marginBottom:10},children:t.settings.map((function(t){return Object(O.jsx)(de,{flexDirection:"column",orientation:"horizontal",setState:e.setState.bind(e),action:t})}))}):null]})}))}),this.state.executeInformation.length>0?Object(O.jsx)("div",{style:{padding:10},children:Object(O.jsx)(x.a,{severity:"success",action:Object(O.jsx)(B.a,{onClick:function(){e.setState({executeInformation:""})},style:{alignSelf:"start"},color:"inherit",size:"small",children:Object(O.jsx)(Q.a,{})}),children:Object(O.jsx)(N.a,{id:"json-pretty",data:JSON.parse(this.state.executeInformation)})})}):null]}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:this.state.severity,children:this.state.message})]}):Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:this.state.severity,children:this.state.message})}}]),n}(s.a.Component),Le=n(161),Ne=n(146),Fe=n(141),Je=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={pageSmartobject:0,pageModule:0,enabled:!1,message:"",modules:[],smartobjects:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).get().fetch("/api/configurations/module");case 2:return t=e.sent,e.next=5,(new W).get().fetch("/api/configurations/smartobject");case 5:n=e.sent,t.error?this.setState({enabled:!0,message:t.package+" : "+t.message}):n.error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.setState({enabled:!1,message:"",modules:t.data,smartobjects:n.data});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsxs)(R.a,{children:[Object(O.jsx)(M.a,{children:Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:"Identifiant"})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:"Name"})})]})}),Object(O.jsx)(P.a,{children:this.state.smartobjects.slice(10*this.state.pageSmartobject,10*(this.state.pageSmartobject+1)).map((function(e){return Object(O.jsxs)(A.a,{hover:!0,style:{cursor:"pointer"},children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:e.id})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:e.name})})]},e.reference)}))})]})}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignContent:"center",alignItems:"center"},children:[Object(O.jsx)("div",{style:{flexDirection:"row",display:"flex"},children:Object(O.jsx)(p.a,{style:{width:50,height:50,marginTop:10,padding:5,marginBottom:10,textAlign:"center",justifyContent:"space-around",alignContent:"center",alignItems:"center",display:"flex",flexDirection:"row"},children:Object(O.jsx)(w.b,{to:"/market/module",style:{textDecoration:"none",color:"white"},children:Object(O.jsx)(B.a,{style:{borderRadius:0},children:Object(O.jsx)(Le.a,{})})})})}),Object(O.jsx)(E.a,{component:"div",count:this.state.smartobjects.length,rowsPerPage:10,page:this.state.pageSmartobject,rowsPerPageOptions:[],onChangePage:function(t,n){e.setState({pageSmartobject:n})}})]}),Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsxs)(R.a,{children:[Object(O.jsx)(M.a,{children:Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:"Identifiant"})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:"Name"})})]})}),Object(O.jsx)(P.a,{children:this.state.modules.slice(10*this.state.pageSmartobject,10*(this.state.pageSmartobject+1)).map((function(e){return Object(O.jsxs)(A.a,{hover:!0,style:{cursor:"pointer"},children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:e.id})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:e.name})})]},e.reference)}))})]})}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignContent:"center",alignItems:"center"},children:[Object(O.jsx)("div",{style:{flexDirection:"row",display:"flex"},children:Object(O.jsx)(p.a,{style:{width:50,height:50,marginTop:10,padding:5,marginBottom:10,textAlign:"center",justifyContent:"space-around",alignContent:"center",alignItems:"center",display:"flex",flexDirection:"row"},children:Object(O.jsx)(w.b,{to:"/market/smartobject",style:{textDecoration:"none",color:"white"},children:Object(O.jsx)(B.a,{style:{borderRadius:0},children:"smartobject"!=this.state.id?Object(O.jsx)(Ne.a,{}):Object(O.jsx)(Fe.a,{})})})})}),Object(O.jsx)(E.a,{component:"div",count:this.state.modules.length,rowsPerPage:10,page:this.state.pageModule,rowsPerPageOptions:[],onChangePage:function(t,n){e.setState({pageModule:n})}})]}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]})}}]),n}(s.a.Component),Ve=n(152),_e=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={enabled:!1,message:"",markets:[],pageMarket:0,severity:"error",loading:!1},a}return Object(h.a)(n,[{key:"install",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,(new W).post({package:t}).fetch("/api/markets/install");case 3:(n=e.sent).error?this.setState({loading:!1,severity:"error",enabled:!0,message:n.package+" : "+n.message}):(this.setState({severity:"info",enabled:!0,message:t+" was installed"}),this.componentDidMount());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"upgrade",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,(new W).post({package:t}).fetch("/api/markets/upgrade");case 3:(n=e.sent).error?this.setState({loading:!1,severity:"error",enabled:!0,message:n.package+" : "+n.message}):(this.setState({severity:"info",enabled:!0,message:t+" was upgraded"}),this.componentDidMount());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uninstall",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,(new W).post({package:t}).fetch("/api/markets/uninstall");case 3:(n=e.sent).error?this.setState({loading:!1,severity:"error",enabled:!0,message:n.package+" : "+n.message}):(this.setState({severity:"info",enabled:!0,message:t+" was removed"}),this.componentDidMount());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).get().fetch("/api/configurations/module");case 2:return t=e.sent,e.next=5,(new W).get().fetch("/api/configurations/smartobject");case 5:return n=e.sent,e.next=8,(new W).get().fetch("/api/ping");case 8:return a=e.sent,e.next=11,fetch("https://market.intendant.io");case 11:return s=e.sent,e.next=14,s.json();case 14:i=(i=(i=e.sent).map((function(e){return e.mode="install",e.currentVersion="0.0.0",e}))).map((function(e){return"@intendant/core"==e.name&&(a.version!=e.version?e.mode="upgrade":e.mode="none",e.currentVersion=a.version),e})),t.data.forEach((function(e){i=i.map((function(t){return t.name==e.name&&(t.currentVersion=e.version,t.version==e.version?t.mode="remove":t.mode="update"),t}))})),n.data.forEach((function(e){i=i.map((function(t){return t.name==e.name&&(t.currentVersion=e.version,t.version==e.version?t.mode="remove":t.mode="update"),t}))})),this.setState({markets:i}),t.error?this.setState({severity:"error",enabled:!0,message:t.package+" : "+t.message}):n.error?this.setState({severity:"error",enabled:!0,message:n.package+" : "+n.message}):this.setState({modules:t.data,smartobjects:n.data}),this.setState({loading:!1});case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsxs)(R.a,{children:[Object(O.jsx)(M.a,{children:Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:"Name"})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:"Type"})}),Object(O.jsx)(I.a,{align:"center",children:Object(O.jsx)(T.a,{variant:"body1",children:"Version"})}),Object(O.jsx)(I.a,{align:"center",children:Object(O.jsx)(T.a,{variant:"body1",children:"Action"})})]})}),Object(O.jsx)(P.a,{children:this.state.markets.slice(20*this.state.pageMarket,20*(this.state.pageMarket+1)).map((function(t){return Object(O.jsxs)(A.a,{hover:!0,style:{cursor:"pointer"},children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:t.name})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:t.type})}),Object(O.jsx)(I.a,{align:"center",children:Object(O.jsx)(T.a,{variant:"body1",children:t.version})}),Object(O.jsx)(I.a,{align:"center",children:Object(O.jsx)(T.a,{variant:"body1",children:"none"==t.mode?Object(O.jsx)(T.a,{variant:"body1",children:"Updated"}):"remove"==t.mode?Object(O.jsx)(f.a,{disabled:e.state.loading,size:"small",startIcon:Object(O.jsx)(Q.a,{}),onClick:function(){e.uninstall(t.name)},variant:"outlined",children:"Remove"}):"upgrade"==t.mode?Object(O.jsx)(f.a,{disabled:e.state.loading,size:"small",startIcon:Object(O.jsx)(Ve.a,{}),onClick:function(){e.uninstall(t.name)},variant:"outlined",children:"Upgrade"}):"install"==t.mode?Object(O.jsx)(f.a,{disabled:e.state.loading,size:"small",startIcon:Object(O.jsx)(Ve.a,{}),onClick:function(){e.install(t.name)},variant:"outlined",disableElevation:!0,children:"Install"}):"update"==t.mode?Object(O.jsx)(f.a,{disabled:e.state.loading,size:"small",startIcon:Object(O.jsx)(Ve.a,{}),onClick:function(){e.install(t.name)},variant:"outlined",disableElevation:!0,children:"Update"}):Object(O.jsx)(f.a,{disabled:!0,size:"small",startIcon:Object(O.jsx)(Ve.a,{}),onClick:function(){e.install(t.name)},variant:"outlined",disableElevation:!0,children:"Unknown"})})})]},t.reference)}))})]})}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignContent:"center",alignItems:"center"},children:Object(O.jsx)(E.a,{component:"div",count:this.state.markets.length,rowsPerPage:20,page:this.state.pageMarket,rowsPerPageOptions:[],onChangePage:function(t,n){e.setState({pageMarket:n})}})}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:this.state.severity,children:this.state.message})]})}}]),n}(s.a.Component),Ue=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={page:0,enabled:!1,message:"",widgets:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).get().fetch("/api/widgets");case 2:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.setState({enabled:!1,message:"",widgets:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsx)(R.a,{children:Object(O.jsx)(P.a,{children:this.state.widgets.slice(10*this.state.page,10*(this.state.page+1)).map((function(e){return Object(O.jsx)(w.b,{to:"/widget/"+e.id,style:{textDecoration:"none",color:"white",display:"contents"},children:Object(O.jsxs)(A.a,{hover:!0,style:{cursor:"pointer"},children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)("img",{style:{width:30,height:30,filter:"invert(100%)"},src:"/admin/ressource/icon/"+e.icon+".svg"})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:e.reference})}),Object(O.jsx)(I.a,{align:"left",children:e.contents.sort((function(e,t){return e.type.rank>t.type.rank})).map((function(e){return e.content.split("\n").map((function(t){return Object(O.jsx)(T.a,{variant:"body1",style:{fontWeight:"title"==e.type.reference?"bold":"normal"},children:t})}))}))}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:e.icon})})]},e.reference)})}))})})}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignContent:"center",alignItems:"center"},children:[Object(O.jsx)("div",{style:{flexDirection:"row",display:"flex"},children:Object(O.jsx)(p.a,{style:{width:50,height:50,marginTop:10,padding:5,marginBottom:10,textAlign:"center",justifyContent:"space-around",alignContent:"center",alignItems:"center",display:"flex",flexDirection:"row"},children:Object(O.jsx)(w.b,{to:"/widget/new",style:{textDecoration:"none",color:"white"},children:Object(O.jsx)(B.a,{style:{borderRadius:0},children:Object(O.jsx)(C.a,{})})})})}),Object(O.jsx)(E.a,{component:"div",count:this.state.widgets.length,rowsPerPage:10,page:this.state.page,rowsPerPageOptions:[],onChangePage:function(t,n){e.setState({page:n})}})]}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]})}}]),n}(s.a.Component),He=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={enabled:!1,message:"",popup:!1,content:null,description:"",image:"",sources:[],contentSources:[],source:null,action:null,widgetReference:"",reference:"",icon:"",type:"title",types:[],contents:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).get().fetch("/api/smartobjects");case 2:return t=e.sent,e.next=5,(new W).get().fetch("/api/configurations/widget");case 5:return n=e.sent,e.next=8,xe.getSource(["smartobject","module"]);case 8:a=e.sent,t.error?this.setState({enabled:!0,message:t.package+" : "+t.message}):n.error?this.setState({enabled:!0,message:n.package+" : "+n.message}):a.error?this.setState({enabled:!0,message:a.package+" : "+a.message}):this.setState({enabled:!1,message:"",loading:!1,sources:a.data,type:!1,types:n.data.contents.types});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSource",value:function(e){var t=this;this.state.sources.map((function(n){n.id==e&&t.setState({source:n,action:null})}))}},{key:"setAction",value:function(e){var t=this;this.state.source.actions.map((function(n){n.id==e&&t.setState({action:n})}))}},{key:"setType",value:function(e){var t=this;this.state.types.map((function(n){n.id==e&&t.setState({type:n})}))}},{key:"save",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.widgetReference.length&&0!=this.state.contentSources.length&&0!=this.state.icon.length){e.next=3;break}return this.setState({enabled:!0,message:"Missing parameters"}),e.abrupt("return");case 3:return t=localStorage.getItem("authorization"),n=localStorage.getItem("server"),e.next=7,fetch(n+"/api/widgets",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({reference:this.state.widgetReference,sources:this.state.contentSources,contents:this.state.contents,icon:this.state.icon})});case 7:return a=e.sent,e.next=10,a.json();case 10:(s=e.sent).error?this.setState({enabled:!0,message:s.package+" : "+s.message}):this.props.history.push("/widget");case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"insertContent",value:function(){var e=this.state.contents;e.push({type:this.state.type,content:this.state.content}),this.setState({contents:e,content:""})}},{key:"insertSource",value:function(){var e=this;if(null!=this.state.action&&null!=this.state.source&&0!=this.state.reference.length){var t=!1,n=this.state.contentSources;if(n.forEach((function(n){n.reference==e.state.reference&&(t=!0,e.setState({enabled:!0,message:"Duplicate reference"}))})),!t){for(var a=[],s=this.state.action,i=0;i<s.settings.length;i++){var r=s.settings[i],c=this.state["argument-"+r.id];void 0==c&&(c=r.default),a.push({reference:r.id,value:c})}n.push({source:this.state.source,action:this.state.action,arguments:a,reference:this.state.reference}),this.setState({contentSources:n,action:null,source:null,reference:""})}}else this.setState({enabled:!0,message:"Missing parameters"})}},{key:"delete",value:function(e){var t=[];this.state.contents.forEach((function(n,a){a!=e&&t.push(n)})),this.setState({contents:t})}},{key:"deleteContent",value:function(e){var t=[];this.state.contentSources.forEach((function(n,a){a!=e&&t.push(n)})),this.setState({contentSources:t})}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsxs)(p.a,{elevation:2,style:{padding:10,marginBottom:10,justifyContent:"left"},children:[Object(O.jsx)("div",{style:{padding:10},children:Object(O.jsx)(T.a,{variant:"h4",children:" Widget "})}),Object(O.jsx)(F.a,{}),Object(O.jsxs)("div",{style:{padding:10,paddingBottom:0},children:[Object(O.jsx)(g.a,{onChange:function(t){e.setState({widgetReference:t.target.value})},multiline:!0,value:this.state.widgetReference,label:"Reference",variant:"outlined"}),Object(O.jsx)(g.a,{style:{marginLeft:10},onChange:function(t){e.setState({icon:t.target.value})},multiline:!0,value:this.state.icon,label:"Icon",variant:"outlined",InputProps:{endAdornment:Object(O.jsx)(pe.a,{position:"end",children:Object(O.jsx)(B.a,{onClick:function(){e.setState({popup:!0})},style:{margin:0,padding:0},children:Object(O.jsx)(me.a,{})})})}}),Object(O.jsx)(ge.a,{open:this.state.popup,onClose:function(){e.setState({popup:!1})},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(O.jsx)(ve,{onSelect:function(t){e.setState({popup:!1,icon:t})}})})]}),Object(O.jsxs)("div",{style:{padding:10,paddingBottom:0},children:[Object(O.jsx)(T.a,{variant:"h5",children:" Source "}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"row",paddingTop:10},children:Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsxs)(R.a,{children:[Object(O.jsx)(M.a,{children:Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"subtitle1",children:" Source "})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"subtitle1",children:" Argument "})}),Object(O.jsx)(I.a,{align:"left"})]})}),Object(O.jsxs)(P.a,{children:[this.state.contentSources.map((function(t,n){return Object(O.jsxs)(A.a,{children:[Object(O.jsxs)(I.a,{align:"left",style:{width:"30%"},children:[Object(O.jsxs)(T.a,{variant:"subtitle1",children:[" ",t.reference," "]}),Object(O.jsxs)(T.a,{variant:"subtitle1",children:[" ",t.source.name," "]}),Object(O.jsxs)(T.a,{variant:"subtitle1",children:[" ",t.action.name," "]})]}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"subtitle1",children:JSON.stringify(t.arguments)})}),Object(O.jsx)(I.a,{align:"right",children:Object(O.jsx)(B.a,{onClick:function(){e.deleteContent(n)},style:{borderRadius:2},children:Object(O.jsx)(Q.a,{})})})]})})),Object(O.jsxs)(A.a,{children:[Object(O.jsxs)(I.a,{align:"left",style:{width:"30%"},children:[Object(O.jsx)(g.a,{onChange:function(t){e.setState({reference:t.target.value})},style:{width:"100%"},multiline:!0,value:this.state.reference,label:"Reference",variant:"outlined"}),Object(O.jsxs)(K.a,{variant:"outlined",style:{marginTop:5,marginBottom:5,width:"100%"},children:[Object(O.jsx)(X.a,{children:"Source"}),Object(O.jsx)(Y.a,{placeholder:"Source",value:this.state.source?this.state.source.id:null,onChange:function(t){e.setSource(t.target.value)},label:"Source",children:this.state.sources.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}),this.state.source?Object(O.jsxs)(K.a,{variant:"outlined",style:{marginTop:5,marginBottom:5,width:"100%"},children:[Object(O.jsx)(X.a,{children:"Action"}),Object(O.jsx)(Y.a,{placeholder:"Action",style:{width:"100%"},value:this.state.action?this.state.action.id:null,onChange:function(t){e.setAction(t.target.value)},label:"Source",children:this.state.source.actions.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}):null]}),Object(O.jsx)(I.a,{align:"right",style:{width:"40%"},children:this.state.action&&this.state.action.settings.length>0?Object(O.jsx)("div",{style:{marginLeft:5,marginBottom:5,marginTop:5,borderStyle:"solid",paddingLeft:10,paddingRight:10,borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)",width:"100%"},children:Object(O.jsx)("div",{style:{display:"flex",paddingTop:10,paddingBottom:10,flexDirection:"column"},children:this.state.action.settings.map((function(t){return Object(O.jsx)(de,{flexDirection:"column",orientation:"horizontal",setState:e.setState.bind(e),action:t})}))})}):null}),Object(O.jsx)(I.a,{align:"right",children:Object(O.jsx)(B.a,{onClick:function(){e.insertSource()},style:{borderRadius:2},children:Object(O.jsx)(C.a,{})})})]})]})]})})})]}),Object(O.jsxs)("div",{style:{padding:10,paddingBottom:0},children:[Object(O.jsx)(T.a,{variant:"h5",children:" Content "}),Object(O.jsx)("div",{style:{marginTop:10,marginBottom:10},children:Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsxs)(R.a,{children:[Object(O.jsx)(M.a,{children:Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"subtitle1",children:" Type "})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"subtitle1",children:" Affichage "})}),Object(O.jsx)(I.a,{align:"left"})]})}),Object(O.jsxs)(P.a,{children:[this.state.contents.sort((function(e,t){return e.type.rank>t.type.rank})).map((function(t,n){return Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsxs)(T.a,{variant:"subtitle1",children:[" ",t.type.name," "]})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsxs)(T.a,{variant:"subtitle1",children:[" ",t.content," "]})}),Object(O.jsx)(I.a,{align:"right",children:Object(O.jsx)(B.a,{onClick:function(){e.delete(n)},style:{borderRadius:2},children:Object(O.jsx)(Q.a,{})})})]})})),Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsxs)(K.a,{variant:"outlined",style:{marginRight:10,width:"100%"},children:[Object(O.jsx)(X.a,{children:"Type"}),Object(O.jsx)(Y.a,{value:this.state.type.id,onChange:function(t){e.setType(t.target.value)},label:"Type",children:this.state.types.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(g.a,{onChange:function(t){e.setState({content:t.target.value})},style:{width:"100%"},multiline:!0,value:this.state.content,label:"Name",variant:"outlined"})}),Object(O.jsx)(I.a,{align:"right",children:Object(O.jsx)(B.a,{onClick:function(){e.insertContent()},style:{borderRadius:2},children:Object(O.jsx)(C.a,{})})})]})]})]})})})]}),Object(O.jsx)(f.a,{style:{marginTop:5,marginBottom:5},onClick:function(){e.save()},variant:"outlined",children:"Save"})]}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]})}}]),n}(s.a.Component),Qe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={enabled:!1,message:"",id:e.match.params.id,contentSources:[],reference:"",source:null,action:null,type:"title",content:"",sources:[],types:[],widget:null,needSave:null},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).get().fetch("/api/widgets/"+this.state.id);case 2:return t=e.sent,e.next=5,(new W).get().fetch("/api/configurations/widget");case 5:return n=e.sent,e.next=8,xe.getSource(["smartobject","module"]);case 8:a=e.sent,t.error?this.setState({enabled:!0,message:t.package+" : "+t.message}):a.error?this.setState({enabled:!0,message:a.package+" : "+a.message}):n.error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.setState({enabled:!1,message:"",loading:!1,widget:t.data,sources:a.data,types:n.data.contents.types});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).delete({}).fetch("/api/widgets/"+this.state.widget.id);case 2:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.props.history.push("/widget");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteSource",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).delete().fetch("/api/widgets/"+this.state.widget.id+"/sources/"+t);case 2:(n=e.sent).error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"insertSource",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,s,i,r,c,o=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.state.action&&null!=this.state.source&&0!=this.state.reference.length){e.next=3;break}return this.setState({enabled:!0,message:"Missing parameters"}),e.abrupt("return");case 3:if(t=!1,this.state.widget.sources.forEach((function(e){e.reference==o.state.reference&&(t=!0,o.setState({enabled:!0,message:"Duplicate reference"}))})),!t){e.next=7;break}return e.abrupt("return");case 7:for(n=[],a=this.state.action,s=0;s<a.settings.length;s++)i=a.settings[s],void 0==(r=this.state["argument-"+i.id])&&(r=i.default),n.push({reference:i.id,value:r});return e.next=12,(new W).post({source:this.state.source,action:this.state.action,arguments:n,reference:this.state.reference}).fetch("/api/widgets/"+this.state.id+"/sources");case 12:(c=e.sent).error?this.setState({enabled:!0,message:c.package+" : "+c.message}):(this.setState({action:null,source:null,reference:""}),this.componentDidMount());case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSource",value:function(e){var t=this;this.state.sources.map((function(n){n.id==e&&t.setState({source:n,action:null})}))}},{key:"setAction",value:function(e){var t=this;this.state.source.actions.map((function(n){n.id==e&&t.setState({action:n})}))}},{key:"setContent",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).post({type:this.state.type,content:this.state.content}).fetch("/api/widgets/"+this.state.id+"/contents");case 2:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):(this.setState({content:""}),this.componentDidMount());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteContent",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).delete().fetch("/api/widgets/"+this.state.id+"/contents/"+t);case 2:(n=e.sent).error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.widget,a=n.contents.map((function(e){return e.id==t.id&&(e.native=t.native),e})),n.contents=a,this.setState({widget:n,needSave:null}),e.next=6,(new W).put({content:t}).fetch("/api/widgets/"+this.state.widget.id);case 6:(s=e.sent).error?this.setState({enabled:!0,message:s.package+" : "+s.message}):this.componentDidMount();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.widget?Object(O.jsxs)("div",{children:[Object(O.jsxs)(p.a,{elevation:2,style:{padding:10,justifyContent:"left"},children:[Object(O.jsxs)("div",{style:{padding:10},children:[Object(O.jsx)(T.a,{variant:"h4",style:{fontSize:25},children:this.state.widget.reference}),Object(O.jsx)(T.a,{variant:"subtitle1",children:this.state.widget.icon})]}),Object(O.jsx)(F.a,{}),Object(O.jsxs)("div",{style:{padding:10,paddingBottom:0},children:[Object(O.jsx)(T.a,{variant:"h5",children:"Source"}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"row",paddingTop:10},children:Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsxs)(R.a,{children:[Object(O.jsx)(M.a,{children:Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"subtitle1",children:"Reference"})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"subtitle1",children:"Source"})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"subtitle1",children:"Argument"})}),Object(O.jsx)(I.a,{align:"left"})]})}),Object(O.jsx)(P.a,{children:this.state.widget.sources.map((function(t,n){return Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"subtitle1",children:t.reference})}),Object(O.jsxs)(I.a,{align:"left",children:[Object(O.jsx)(T.a,{variant:"subtitle1",children:t.object}),Object(O.jsx)(T.a,{variant:"subtitle1",children:t.action})]}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"subtitle1",children:t.arguments.map((function(e){return Object(O.jsx)(T.a,{variant:"body1",children:e.reference+" : "+e.value})}))})}),Object(O.jsx)(I.a,{align:"right",children:Object(O.jsx)(B.a,{onClick:function(){e.deleteSource(t.id)},style:{borderRadius:3},children:Object(O.jsx)(H.a,{})})})]})}))})]})})})]}),Object(O.jsx)("div",{style:{padding:10,paddingBottom:0},children:Object(O.jsx)("div",{style:{display:"flex",flexDirection:"row",paddingTop:10},children:Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsx)(R.a,{children:Object(O.jsxs)(P.a,{children:[this.state.contentSources.map((function(t,n){return Object(O.jsxs)(A.a,{children:[Object(O.jsxs)(I.a,{align:"left",style:{width:"30%"},children:[Object(O.jsxs)(T.a,{variant:"subtitle1",children:[" ",t.reference," "]}),Object(O.jsxs)(T.a,{variant:"subtitle1",children:[" ",t.source.name," "]}),Object(O.jsxs)(T.a,{variant:"subtitle1",children:[" ",t.action.name," "]})]}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"subtitle1",children:JSON.stringify(t.arguments)})}),Object(O.jsx)(I.a,{align:"right",children:Object(O.jsx)(B.a,{onClick:function(){e.deleteContent(n)},style:{borderRadius:2},children:Object(O.jsx)(Q.a,{})})})]})})),Object(O.jsxs)(A.a,{children:[Object(O.jsxs)(I.a,{align:"left",style:{width:"30%"},children:[Object(O.jsx)(g.a,{onChange:function(t){e.setState({reference:t.target.value})},style:{width:"100%"},multiline:!0,value:this.state.reference,label:"Reference",variant:"outlined"}),Object(O.jsxs)(K.a,{variant:"outlined",style:{marginTop:5,marginBottom:5,width:"100%"},children:[Object(O.jsx)(X.a,{children:"Source"}),Object(O.jsx)(Y.a,{placeholder:"Source",value:this.state.source?this.state.source.id:null,onChange:function(t){e.setSource(t.target.value)},label:"Source",children:this.state.sources.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}),this.state.source?Object(O.jsxs)(K.a,{variant:"outlined",style:{marginTop:5,marginBottom:5,width:"100%"},children:[Object(O.jsx)(X.a,{children:"Action"}),Object(O.jsx)(Y.a,{placeholder:"Action",style:{width:"100%"},value:this.state.action?this.state.action.id:null,onChange:function(t){e.setAction(t.target.value)},label:"Source",children:this.state.source.actions.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]}):null]}),Object(O.jsx)(I.a,{align:"right",style:{width:"40%"},children:this.state.action&&this.state.action.settings.length>0?Object(O.jsx)("div",{style:{marginLeft:5,marginBottom:5,marginTop:5,borderStyle:"solid",paddingLeft:10,paddingRight:10,borderRadius:3,borderWidth:.25,borderColor:"rgba(255, 255, 255, 0.23)",width:"100%"},children:Object(O.jsx)("div",{style:{display:"flex",paddingTop:10,paddingBottom:10,flexDirection:"column"},children:this.state.action.settings.map((function(t){return Object(O.jsx)(de,{flexDirection:"column",orientation:"horizontal",setState:e.setState.bind(e),action:t})}))})}):null}),Object(O.jsx)(I.a,{align:"right",children:Object(O.jsx)(B.a,{onClick:function(){e.insertSource()},style:{borderRadius:2},children:Object(O.jsx)(C.a,{})})})]})]})})})})}),Object(O.jsxs)("div",{style:{padding:10,paddingBottom:0},children:[Object(O.jsx)(T.a,{variant:"h5",children:"Content"}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"row",paddingTop:10},children:Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsxs)(R.a,{children:[Object(O.jsx)(M.a,{children:Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",style:{width:"15%"},children:Object(O.jsx)(T.a,{variant:"subtitle1",children:"Type"})}),Object(O.jsx)(I.a,{align:"left",style:{width:"80%"},children:Object(O.jsx)(T.a,{variant:"subtitle1",children:"content"})}),Object(O.jsx)(I.a,{align:"left",style:{width:"20%"}})]})}),Object(O.jsxs)(P.a,{children:[this.state.widget.contents.sort((function(e,t){return e.type.rank>t.type.rank})).map((function(t,n){return Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"subtitle1",children:t.type.name})}),Object(O.jsxs)(I.a,{align:"left",children:[Object(O.jsx)(g.a,{style:{width:"100%",marginBottom:5},onChange:function(a){t.native=a.target.value,e.setState({needSave:n})},onBlur:function(n){e.update(t)},multiline:!0,value:t.native,variant:"outlined"}),t.content.split("\n").map((function(t){return Object(O.jsx)(T.a,{variant:"body1",color:e.state.needSave==n?"primary":"inherit",style:{fontWeight:"title"==t.type?"bold":"normal"},children:t})}))]}),Object(O.jsx)(I.a,{align:"right",children:Object(O.jsx)(B.a,{onClick:function(){e.deleteContent(t.id)},style:{borderRadius:3},children:Object(O.jsx)(H.a,{})})})]})})),Object(O.jsxs)(A.a,{children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsxs)(K.a,{variant:"outlined",style:{marginRight:10,width:"100%"},children:[Object(O.jsx)(X.a,{children:"Type"}),Object(O.jsx)(Y.a,{value:this.state.type,onChange:function(t){e.setState({type:t.target.value})},label:"Type",children:this.state.types.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})]})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(g.a,{onChange:function(t){e.setState({content:t.target.value})},style:{width:"100%"},multiline:!0,value:this.state.content,label:"Name",variant:"outlined"})}),Object(O.jsx)(I.a,{align:"right",children:Object(O.jsx)(B.a,{onClick:function(){e.setContent()},style:{borderRadius:2},children:Object(O.jsx)(C.a,{})})})]})]})]})})})]})]}),Object(O.jsx)(p.a,{style:{width:"min-content",marginTop:10,alignContent:"center",justifyContent:"center",alignSelf:"center"},children:Object(O.jsx)(B.a,{onClick:function(){e.delete()},style:{borderRadius:5},children:Object(O.jsx)(H.a,{})})}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]}):Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})}}]),n}(s.a.Component),qe=n(157),Ge=n(159),Ke=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={page:0,enabled:!1,message:"",users:[],profiles:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).get().fetch("/api/users");case 2:return t=e.sent,e.next=5,(new W).get().fetch("/api/profiles");case 5:n=e.sent,console.log(t),t.error?this.setState({enabled:!0,message:t.package+" : "+t.message}):n.error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.setState({enabled:!1,message:"",users:t.data,profiles:n.data});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).delete().fetch("/api/users/"+t);case 2:(n=e.sent).error?this.setState({enabled:!0,message:n.package+" : "+n.message}):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateProfile",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).put({login:t.login,profile:n}).fetch("/api/users/"+t.id);case 2:(a=e.sent).error?this.setState({enabled:!0,message:a.package+" : "+a.message}):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsxs)(O.Fragment,{children:[this.state.loading?Object(O.jsx)(p.a,{style:{display:"flex",padding:10,alignContent:"center",justifyContent:"center",alignItems:"center",alignSelf:"center"},children:Object(O.jsx)(T.a,{variant:"subtitle1",style:{fontSize:18},children:"Chargement des smartobject"})}):Object(O.jsxs)("div",{children:[Object(O.jsx)(D.a,{component:p.a,children:Object(O.jsx)(R.a,{children:Object(O.jsx)(P.a,{children:this.state.users.sort((function(e,t){return e.profile>t.profile})).slice(10*this.state.page,10*(this.state.page+1)).map((function(t){return Object(O.jsxs)(A.a,{hover:!0,style:{cursor:"pointer"},children:[Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(T.a,{variant:"body1",children:t.login})}),Object(O.jsx)(I.a,{align:"left",children:Object(O.jsx)(K.a,{variant:"outlined",children:Object(O.jsx)(Y.a,{disabled:"admin"==t.login,value:t.profile,onChange:function(n){e.updateProfile(t,n.target.value)},children:e.state.profiles.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})})}),Object(O.jsxs)(I.a,{align:"right",children:[Object(O.jsx)(B.a,{onClick:function(){e.props.history.push("/qrcode/"+btoa(window.location.origin+"|"+t.login+"|"))},style:{borderRadius:3},children:Object(O.jsx)(qe.a,{})}),Object(O.jsx)(B.a,{onClick:function(){e.props.history.push("/user/"+t.id+"/password")},style:{borderRadius:3},children:Object(O.jsx)(Ge.a,{})}),Object(O.jsx)(B.a,{onClick:function(){e.delete(t.id)},style:{borderRadius:3},children:Object(O.jsx)(H.a,{})})]})]},t.id)}))})})}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignContent:"center",alignItems:"center"},children:[Object(O.jsx)(p.a,{style:{width:50,height:50,marginTop:10,padding:5,marginBottom:10,textAlign:"center",justifyContent:"space-around",alignContent:"center",alignItems:"center",display:"flex",flexDirection:"row"},children:Object(O.jsx)(w.b,{to:"/user/new",style:{textDecoration:"none",color:"white"},children:Object(O.jsx)(B.a,{style:{borderRadius:0},children:Object(O.jsx)(C.a,{})})})}),Object(O.jsx)(E.a,{component:"div",count:this.state.users.length,rowsPerPage:10,page:this.state.page,rowsPerPageOptions:[],onChangePage:function(t,n){e.setState({page:n})}})]})]}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]})}}]),n}(s.a.Component),Xe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={enabled:!1,message:"",profiles:[],profile:1,login:"",password:"",confirmationPassword:""},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new W).get().fetch("/api/profiles");case 2:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.setState({enabled:!1,message:"",profiles:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.login.length){e.next=4;break}this.setState({enabled:!0,message:"Missing login"}),e.next=16;break;case 4:if(0!=this.state.password.length){e.next=8;break}this.setState({enabled:!0,message:"Missing password"}),e.next=16;break;case 8:if(this.state.password==this.state.confirmationPassword){e.next=12;break}this.setState({enabled:!0,message:"Passwords are not the same"}),e.next=16;break;case 12:return e.next=14,(new W).post({login:this.state.login,password:this.state.password,profile:this.state.profile}).fetch("/api/users");case 14:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.props.history.push("/user");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)(p.a,{elevation:2,style:{padding:10,justifyContent:"left"},children:Object(O.jsx)("div",{style:{flexDirection:"row",display:"flex",justifyContent:"space-between"},children:Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"start",flexDirection:"column",alignSelf:"start",alignContent:"start",alignItems:"start",padding:10},children:[Object(O.jsx)(g.a,{placeholder:"login",variant:"outlined",value:this.state.login,onChange:function(t){e.setState({login:t.currentTarget.value})}}),Object(O.jsx)(g.a,{type:"password",placeholder:"password",variant:"outlined",value:this.state.password,style:{marginTop:10},onChange:function(t){e.setState({password:t.currentTarget.value})}}),Object(O.jsx)(g.a,{placeholder:"password confirmation",type:"password",variant:"outlined",value:this.state.confirmationPassword,style:{marginTop:10},onChange:function(t){e.setState({confirmationPassword:t.currentTarget.value})}}),Object(O.jsx)(K.a,{variant:"outlined",style:{width:"100%",marginTop:10},children:Object(O.jsx)(Y.a,{value:this.state.profile,onChange:function(t){e.setState({profile:t.target.value})},children:this.state.profiles.map((function(e){return Object(O.jsx)(Z.a,{value:e.id,children:e.name})}))})})]})})}),Object(O.jsx)(p.a,{style:{width:"min-content",height:"min-content",padding:2,alignContent:"center",alignItems:"center",justifyContent:"center",alignSelf:"center",marginTop:5},children:Object(O.jsx)(B.a,{onClick:function(){e.add()},style:{borderRadius:0},variant:"outlined",children:Object(O.jsx)(he.a,{})})}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]})}}]),n}(s.a.Component),Ye=n(201),Ze=n.n(Ye),$e=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),a=t.call(this,e),console.log(a.props.match.params.id),a}return Object(h.a)(n,[{key:"render",value:function(){return Object(O.jsx)(p.a,{elevation:2,style:{padding:10,display:"flex",justifyContent:"center"},children:Object(O.jsx)(Ze.a,{style:{borderRadius:3},value:this.props.match.params.id,size:256,includeMargin:!0})})}}]),n}(s.a.Component),et=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={enabled:!1,id:e.match.params.id,message:"",confirmationPassword:"",password:""},a}return Object(h.a)(n,[{key:"changePassword",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.password.length){e.next=4;break}this.setState({enabled:!0,message:"Missing password"}),e.next=16;break;case 4:if(0!=this.state.confirmationPassword.length){e.next=8;break}this.setState({enabled:!0,message:"Missing confirmation password"}),e.next=16;break;case 8:if(this.state.password==this.state.confirmationPassword){e.next=12;break}this.setState({enabled:!0,message:"Passwords are not the same"}),e.next=16;break;case 12:return e.next=14,(new W).post({password:this.state.password}).fetch("/api/users/"+this.state.id+"/password");case 14:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.props.history.push("/user");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)(p.a,{elevation:2,style:{padding:10,justifyContent:"left"},children:Object(O.jsx)("div",{style:{flexDirection:"row",display:"flex",justifyContent:"space-between"},children:Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"start",flexDirection:"column",alignSelf:"start",alignContent:"start",alignItems:"start",padding:10},children:[Object(O.jsx)(g.a,{placeholder:"password",type:"password",variant:"outlined",value:this.state.password,onChange:function(t){e.setState({password:t.currentTarget.value})}}),Object(O.jsx)(g.a,{placeholder:"password confirmation",type:"password",variant:"outlined",value:this.state.confirmationPassword,style:{marginTop:10},onChange:function(t){e.setState({confirmationPassword:t.currentTarget.value})}})]})})}),Object(O.jsx)(p.a,{style:{width:"min-content",height:"min-content",padding:2,alignContent:"center",alignItems:"center",justifyContent:"center",alignSelf:"center",marginTop:5},children:Object(O.jsx)(B.a,{onClick:function(){e.changePassword()},style:{borderRadius:0},variant:"outlined",children:Object(O.jsx)(he.a,{})})}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]})}}]),n}(s.a.Component),tt=n(425),nt=n(403),at=n(414),st=n(415),it=n(150),rt=n(145),ct=n(137),ot=n(155),lt=n(160),dt=n(149),ut=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return this.props.isMobile?null:Object(O.jsx)(tt.a,{variant:"persistent",anchor:"left",open:!0,style:{width:240},children:Object(O.jsx)("div",{style:{width:240,display:"flex",justifyContent:"space-between"},children:Object(O.jsxs)(nt.a,{children:[Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",padding:5,alignContent:"center",alignSelf:"center",alignItems:"center"},children:[Object(O.jsx)("img",{src:"/admin/logo.svg",style:{height:"7vh",width:"7vh",borderRadius:7,marginLeft:15}}),Object(O.jsxs)("div",{children:[Object(O.jsx)(T.a,{variant:"h5",style:{textAlign:"start",fontWeight:"bold",paddingTop:15,paddingLeft:10},children:"Intendant"}),Object(O.jsx)(T.a,{variant:"subtitle1",style:{textAlign:"start",fontWeight:"bold",paddingTop:0,paddingBottom:15,paddingLeft:10},children:"Administration"})]})]}),Object(O.jsx)(F.a,{}),Object(O.jsx)(w.b,{to:"/smartobject",style:{textDecoration:"none",color:"white"},children:Object(O.jsxs)(J.a,{button:!0,children:[Object(O.jsx)(at.a,{children:Object(O.jsx)(Ne.a,{})}),Object(O.jsx)(st.a,{primary:"Smartobject"})]},"smartobject")}),Object(O.jsx)(w.b,{to:"/module",style:{textDecoration:"none",color:"white"},children:Object(O.jsxs)(J.a,{button:!0,children:[Object(O.jsx)(at.a,{children:Object(O.jsx)(Fe.a,{})}),Object(O.jsx)(st.a,{primary:"Module"})]},"module")}),Object(O.jsx)(w.b,{to:"/widget",style:{textDecoration:"none",color:"white"},children:Object(O.jsxs)(J.a,{button:!0,children:[Object(O.jsx)(at.a,{children:Object(O.jsx)(it.a,{})}),Object(O.jsx)(st.a,{primary:"Widget"})]},"widget")}),Object(O.jsx)(w.b,{to:"/process",style:{textDecoration:"none",color:"white"},children:Object(O.jsxs)(J.a,{button:!0,children:[Object(O.jsx)(at.a,{children:Object(O.jsx)(rt.a,{})}),Object(O.jsx)(st.a,{primary:"Process"})]},"process")}),Object(O.jsx)(w.b,{to:"/routine",style:{textDecoration:"none",color:"white"},children:Object(O.jsxs)(J.a,{button:!0,children:[Object(O.jsx)(at.a,{children:Object(O.jsx)(ct.a,{})}),Object(O.jsx)(st.a,{primary:"Routine"})]},"configuration")}),Object(O.jsx)(w.b,{to:"/user",style:{textDecoration:"none",color:"white"},children:Object(O.jsxs)(J.a,{button:!0,children:[Object(O.jsx)(at.a,{children:Object(O.jsx)(ot.a,{})}),Object(O.jsx)(st.a,{primary:"User"})]},"user")}),Object(O.jsx)(w.b,{to:"/market",style:{textDecoration:"none",color:"white"},children:Object(O.jsxs)(J.a,{button:!0,children:[Object(O.jsx)(at.a,{children:Object(O.jsx)(lt.a,{})}),Object(O.jsx)(st.a,{primary:"Market"})]},"market")}),Object(O.jsx)(F.a,{}),Object(O.jsxs)(J.a,{button:!0,onClick:function(){e.props.onDisconnect()},children:[Object(O.jsx)(at.a,{children:Object(O.jsx)(dt.a,{})}),Object(O.jsx)(st.a,{primary:"Disconnect"})]},"disconnect")]})})})}}]),n}(s.a.Component),ht=n(29),jt=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={isMobile:!1},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.mediaQueries("(max-width: 900px)")}},{key:"mediaQueries",value:function(e){var t=this,n=window.matchMedia(e);this.setState({isMobile:n.matches});n.addListener((function(e){return t.setState({isMobile:e.matches})}))}},{key:"render",value:function(){var e=this;return Object(O.jsxs)(w.a,{basename:"/admin",children:[Object(O.jsx)(ut,{isMobile:this.state.isMobile,onDisconnect:function(){e.props.onDisconnect()}}),Object(O.jsx)("main",{style:{padding:20,width:this.state.isMobile?"95vw":"80vw",height:"100vh"},children:Object(O.jsx)("div",{style:{marginLeft:this.state.isMobile?0:240,marginTop:this.state.isMobile?0:32},children:Object(O.jsxs)(ht.c,{children:[Object(O.jsx)(ht.a,{exact:!0,path:"/smartobject",component:z}),Object(O.jsx)(ht.a,{exact:!0,path:"/smartobject/new",component:je}),Object(O.jsx)(ht.a,{exact:!0,path:"/smartobject/:id",component:ue}),Object(O.jsx)(ht.a,{exact:!0,path:"/module",component:We}),Object(O.jsx)(ht.a,{exact:!0,path:"/module/:id",component:ze}),Object(O.jsx)(ht.a,{exact:!0,path:"/routine",component:De}),Object(O.jsx)(ht.a,{exact:!0,path:"/routine/new",component:Ae}),Object(O.jsx)(ht.a,{exact:!0,path:"/routine/:id",component:Pe}),Object(O.jsx)(ht.a,{exact:!0,path:"/widget",component:Ue}),Object(O.jsx)(ht.a,{exact:!0,path:"/widget/new",component:He}),Object(O.jsx)(ht.a,{exact:!0,path:"/widget/authorization",component:Ue}),Object(O.jsx)(ht.a,{exact:!0,path:"/widget/:id",component:Qe}),Object(O.jsx)(ht.a,{exact:!0,path:"/process",component:be}),Object(O.jsx)(ht.a,{exact:!0,path:"/process/new",component:Oe}),Object(O.jsx)(ht.a,{exact:!0,path:"/process/:id",component:Se}),Object(O.jsx)(ht.a,{exact:!0,path:"/qrcode/:id",component:$e}),Object(O.jsx)(ht.a,{exact:!0,path:"/user",component:Ke}),Object(O.jsx)(ht.a,{exact:!0,path:"/user/new",component:Xe}),Object(O.jsx)(ht.a,{exact:!0,path:"/user/:id/password",component:et}),Object(O.jsx)(ht.a,{exact:!0,path:"/configuration",component:Je}),Object(O.jsx)(ht.a,{exact:!0,path:"/market",component:_e})]})})})]})}}]),n}(s.a.Component),bt=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={authentification:!0,enabled:!1,message:"",password:"",confirmePassword:"",login:"admin",isMobile:!1},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.mediaQueries("(max-width: 900px)")}},{key:"mediaQueries",value:function(e){var t=this,n=window.matchMedia(e);this.setState({isMobile:n.matches});n.addListener((function(e){return t.setState({isMobile:e.matches})}))}},{key:"register",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.password!=this.state.confirmePassword){e.next=7;break}return e.next=3,(new W).put({password:this.state.password}).fetch("/api/getstarted");case 3:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):this.props.onFinish(),e.next=8;break;case 7:this.setState({enabled:!0,message:"Password and password confirmation is not the same"});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsxs)(p.a,{elevation:3,style:{padding:30,width:this.state.isMobile?"400px":"30vw",textAlign:"center"},children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("img",{src:"/admin/logo.svg",style:{height:"15vh",width:"15vh",borderRadius:7}}),Object(O.jsx)("div",{style:{fontSize:70,fontWeight:"bold",marginTop:0,lineHeight:.5},children:"Intendant"}),Object(O.jsx)("div",{style:Object(c.a)({fontSize:14,fontWeight:"bold",marginTop:0,lineHeight:1},"marginTop",30),children:"At the first launch, you must set the admin password"})]}),Object(O.jsxs)("div",{noValidate:!0,autoComplete:"off",style:{marginBottom:10},children:[Object(O.jsx)("div",{style:{marginTop:10},children:Object(O.jsx)(g.a,{value:this.state.password,fullWidth:!0,label:"Password",type:"password",inputProps:{maxLength:12},onChange:function(t){e.setState({password:t.nativeEvent.target.value})}})}),Object(O.jsx)("div",{style:{marginTop:10},children:Object(O.jsx)(g.a,{value:this.state.confirmePassword,fullWidth:!0,label:"Confirmation",type:"password",inputProps:{maxLength:12},onChange:function(t){e.setState({confirmePassword:t.nativeEvent.target.value})}})}),Object(O.jsx)("div",{style:{marginTop:15,textAlign:"end"},children:Object(O.jsx)(f.a,{variant:"plain",onClick:function(){e.register()},children:"Let's get started"})})]}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]})}}]),n}(s.a.Component),pt=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={authentification:!0,enabled:!1,getStarted:!1,message:"",password:"",customAddress:!1,address:window.location.origin,login:"admin",isMobile:!1},a}return Object(h.a)(n,[{key:"mediaQueries",value:function(e){var t=this,n=window.matchMedia(e);this.setState({isMobile:n.matches});n.addListener((function(e){return t.setState({isMobile:e.matches})}))}},{key:"componentDidMount",value:function(){var e=localStorage.getItem("server");e&&this.setState({address:e.replace("http://","")}),this.mediaQueries("(max-width: 900px)")}},{key:"login",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkServer();case 2:if(!e.sent){e.next=7;break}return e.next=5,(new W).post({login:this.state.login,password:this.state.password}).fetch("/api/authentification");case 5:(t=e.sent).error?this.setState({enabled:!0,message:t.package+" : "+t.message}):(localStorage.setItem("authorization",t.token),this.setState({enabled:!1,message:"",authentification:!1}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){localStorage.removeItem("authorization"),this.setState({authentification:!0,password:""})}},{key:"checkServer",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,n=window.location.protocol+"//",this.state.address.split("://").length>1&&(n=""),e.prev=3,e.next=6,fetch(n+this.state.address+"/api/ping",{},2e3);case 6:return a=e.sent,e.next=9,a.json();case 9:if("pong"==(s=e.sent).message){e.next=15;break}this.setState({enabled:!0,message:"Connection to server failed"}),t=!1,e.next=19;break;case 15:if(localStorage.setItem("server",n+this.state.address),!s.getStarted){e.next=19;break}return this.setState({getStarted:!0}),e.abrupt("return",!1);case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),this.setState({enabled:!0,message:"Connection to server failed"}),t=!1;case 25:return e.abrupt("return",t);case 26:case"end":return e.stop()}}),e,this,[[3,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.getStarted?Object(O.jsx)(bt,{onFinish:function(){e.setState({getStarted:!1})}}):this.state.authentification?Object(O.jsxs)(p.a,{elevation:3,style:{padding:30,width:this.state.isMobile?"400px":"25vw",textAlign:"center"},children:[Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{style:{marginBottom:50},children:[Object(O.jsx)("img",{onClick:function(){e.setState({customAddress:!e.state.customAddress})},src:"/admin/logo.svg",style:{height:"15vh",width:"15vh",borderRadius:7,cursor:"pointer"}}),Object(O.jsx)("div",{style:{fontSize:55,fontWeight:"bold",marginTop:0,lineHeight:.5},children:"Intendant"}),Object(O.jsx)("div",{style:Object(c.a)({fontSize:20,fontWeight:"bold",marginTop:0,lineHeight:1},"marginTop",15),children:"Administration"})]}),Object(O.jsxs)("form",{noValidate:!0,onSubmit:function(t){t.preventDefault(),e.login()},autoComplete:"off",style:{marginBottom:10},children:[this.state.customAddress?Object(O.jsx)("div",{style:{padding:5},children:Object(O.jsx)(g.a,{value:this.state.address,fullWidth:!0,label:"Server address",autoFocus:!0,onChange:function(t){e.setState({address:t.nativeEvent.target.value})}})}):null,Object(O.jsx)("div",{style:{padding:5},children:Object(O.jsx)(g.a,{value:this.state.login,fullWidth:!0,label:"Login",autoComplete:"current-login",inputProps:{maxLength:12},onChange:function(t){e.setState({login:t.nativeEvent.target.value})}})}),Object(O.jsx)("div",{style:{padding:5},children:Object(O.jsx)(g.a,{value:this.state.password,fullWidth:!0,label:"Password",type:"password",autoComplete:"current-login",inputProps:{maxLength:12},onChange:function(t){e.setState({password:t.nativeEvent.target.value})}})}),Object(O.jsx)("div",{style:{padding:5,marginTop:5,textAlign:"end"},children:Object(O.jsx)(f.a,{type:"submit",variant:"plain",on:!0,onSubmit:function(){e.login()},onClick:function(){e.login()},children:"Connection"})})]})]}),Object(O.jsx)(y,{onClose:function(){e.setState({enabled:!1})},open:this.state.enabled,severity:"error",children:this.state.message})]}):Object(O.jsx)(jt,{onDisconnect:function(){e.disconnect()}})}}]),n}(s.a.Component),gt=n(416),ft=n(417),mt=n(419);var xt=function(){return Object(O.jsxs)(gt.a,{theme:oe,children:[Object(O.jsx)(ft.a,{}),Object(O.jsx)(mt.a,{style:{userSelect:"none",outline:"none",WebkitTapHighlightColor:"rgba(41,108,71,0.33)",height:"100vh",width:"100wh",backgroundColor:oe.palette.background.default,display:"flex",flexDirection:"column",alignSelf:"center",justifyContent:"center",alignContent:"center",alignItems:"center"},children:Object(O.jsx)(pt,{})})]})};r.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(xt,{})}),document.getElementById("root"))}},[[348,1,2]]]);
//# sourceMappingURL=main.fe4226fc.chunk.js.map