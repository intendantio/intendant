"use strict";(self.webpackChunk_intendant_dashboard=self.webpackChunk_intendant_dashboard||[]).push([[279],{1279:function(e,t,n){n.r(t);var r=n(3032),i=n(7853),s=n(4531),a=n(8932),o=n(2587),l=n(4322),c=n.n(l),d=n(2791),u=n(703),f=n(9373),h=n(493),p=n(4852),g=n(9900),x=n(890),y=n(4721),Z=n(6860),m=(n(4893),n(5886)),v=n(184),b=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).state={page:0,profiles:[],selectProfile:"",authorizations:[]},r}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){var e=(0,r.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new m.Z).get().fetch("/api/profiles");case 2:(t=e.sent).error?this.props.setMessage(t.package+" : "+t.message):""===this.state.selectProfile?(this.setState({profiles:t.data,selectProfile:t.data[0].id}),this.onSelectProfile(t.data[0].id)):(this.setState({profiles:t.data}),this.onSelectProfile(this.state.selectProfile));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getColor",value:function(e){switch(e){default:case"GET":return Z.Z.palette.success.main;case"POST":return Z.Z.palette.error.main;case"PUT":return Z.Z.palette.warning.main;case"DELETE":return Z.Z.palette.info.main}}},{key:"onSelectProfile",value:function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({selectProfile:t}),e.next=3,(new m.Z).get().fetch("/api/profiles/"+t+"/authorizations");case 3:(n=e.sent).error?this.props.setMessage(n.package+" : "+n.message):this.setState({authorizations:n.data});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateSecure",value:function(){var e=(0,r.Z)(c().mark((function e(t,n,r){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new m.Z).post({authorization:n,secure:r}).fetch("/api/profiles/"+t+"/authorizations");case 2:(i=e.sent).error?this.props.setMessage(i.package+" : "+i.message):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return(0,v.jsxs)("div",{children:[(0,v.jsx)(u.Z,{style:{padding:10,marginBottom:10,flexDirection:"row",display:"flex"},children:this.state.profiles.map((function(t){return(0,v.jsx)(f.Z,{color:"inherit",style:{marginLeft:5,marginRight:5},onClick:function(){e.onSelectProfile(t.id)},variant:e.state.selectProfile===t.id?"contained":"outlined",children:t.name})}))}),(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,v.jsxs)(h.Z,{style:{backgroundColor:Z.Z.palette.background.paper,width:"45%"},children:[(0,v.jsx)(p.ZP,{children:(0,v.jsx)(g.Z,{children:(0,v.jsx)(x.Z,{variant:"subtitle1",style:{display:"flex",padding:3,borderRadius:3,backgroundColor:Z.Z.palette.error.main,alignContent:"center",alignItems:"center",justifyContent:"center",alignSelf:"center"},children:"Refus\xe9"})})}),(0,v.jsx)(y.Z,{}),this.state.authorizations.sort((function(e,t){return e.method<t.method})).filter((function(e){return 0===e.secure})).map((function(t){return(0,v.jsx)(p.ZP,{button:!0,onClick:function(){e.updateSecure(e.state.selectProfile,t.id,1)},children:(0,v.jsx)(g.Z,{style:{display:"flex",flexDirection:"row"},children:(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,v.jsx)(x.Z,{variant:"body",style:{padding:3,paddingLeft:8,paddingRight:8,borderRadius:3,backgroundColor:e.getColor(t.method)},children:t.method}),(0,v.jsx)(x.Z,{variant:"body",style:{padding:3,borderRadius:3,marginLeft:5},children:t.reference})]})})})}))]}),(0,v.jsxs)(h.Z,{style:{backgroundColor:Z.Z.palette.background.paper,width:"45%"},children:[(0,v.jsx)(p.ZP,{children:(0,v.jsx)(g.Z,{children:(0,v.jsx)(x.Z,{variant:"subtitle1",style:{display:"flex",padding:3,borderRadius:3,backgroundColor:Z.Z.palette.success.main,alignContent:"center",alignItems:"center",justifyContent:"center",alignSelf:"center"},children:"Authoris\xe9"})})}),(0,v.jsx)(y.Z,{}),this.state.authorizations.sort((function(e,t){return e.method<t.method})).filter((function(e){return 1===e.secure})).map((function(t){return(0,v.jsx)(p.ZP,{button:!0,onClick:function(){e.updateSecure(e.state.selectProfile,t.id,0)},children:(0,v.jsx)(g.Z,{style:{display:"flex",flexDirection:"row"},children:(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,v.jsx)(x.Z,{variant:"body",style:{padding:3,paddingLeft:8,paddingRight:8,borderRadius:3,backgroundColor:e.getColor(t.method)},children:t.method}),(0,v.jsx)(x.Z,{variant:"body",style:{padding:3,borderRadius:3,marginLeft:5},children:t.reference})]})})})}))]})]})]})}}]),n}(d.Component);t.default=b}}]);
//# sourceMappingURL=279.e9abe917.chunk.js.map