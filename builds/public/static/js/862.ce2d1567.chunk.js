"use strict";(self.webpackChunk_intendant_dashboard=self.webpackChunk_intendant_dashboard||[]).push([[862],{4511:function(e,t,s){s.r(t),s.d(t,{default:function(){return _}});var n=s(8489),i=s(3032),r=s(7853),a=s(4531),o=s(8932),c=s(2587),p=s(4322),l=s.n(p),u=s(2791),d=(s(9779),s(703)),h=s(890),f=s(1889),g=s(7621),x=s(9373),Z=s(4852),v=s(5523),m=s(9955),j=s(6960),y=s(1131),k=s(1141),w=(s(4893),s(722)),S=s(419),z=s(5886),P=s(7610),b=s(9388),M=s(184),C=function(e){(0,o.Z)(s,e);var t=(0,c.Z)(s);function s(e){var n;return(0,r.Z)(this,s),(n=t.call(this,e)).state={id:e.match.params.id,process:{state:"",mode:"",description:"",description_on:"",description_off:"",inputs:[],profiles:[]},profiles:[],executeInformation:"",referenceInput:"",nameInput:"",typeInput:"",modeInput:0,action:"",source:"",loading:!0,isChecked:!1,sources:[]},e.setTitle("Process"),e.setActionType("return"),n}return(0,a.Z)(s,[{key:"componentDidMount",value:function(){var e=(0,i.Z)(l().mark((function e(){var t,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new z.Z).get().fetch("/api/profiles");case 2:return t=e.sent,e.next=5,(new z.Z).get().fetch("/api/processes/"+this.state.id);case 5:(s=e.sent).error?(this.props.setMessage(s.package+" : "+s.message),this.props.history.push("/process")):this.setState({process:s.data,profiles:t.data,loading:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSource",value:function(e){var t=!1;this.state.sources.forEach((function(s){s.id===e&&(t=s)})),this.setState({source:t})}},{key:"setAction",value:function(e){var t=!1;this.state.source.actions.forEach((function(s){s.id===e&&(t=s)})),this.setState({action:t})}},{key:"delete",value:function(){var e=(0,i.Z)(l().mark((function e(t){var s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new z.Z).delete().fetch("/api/processes/"+t);case 2:(s=e.sent).error?this.props.setMessage(s.package+" : "+s.message):this.props.history.push("/process");case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"executeAction",value:function(){var e=(0,i.Z)(l().mark((function e(){var t,s,n,i,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.setState({loading:!0}),t={},s={},n=0;n<this.state.process.inputs.length;n++)i=this.state.process.inputs[n],r=this.state[i.id],t[i.id]=null,s[i.reference]=r||null;return e.next=6,(new z.Z).post({inputs:s}).fetch("/api/processes/"+this.state.process.id+"/execute");case 6:(a=e.sent).error?(this.setState({loading:!1}),this.props.setMessage(a.package+" : "+a.message)):(this.setState(t),a.data&&this.setState({executeInformation:JSON.stringify(a.data)}),this.componentDidMount());case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"insertProfile",value:function(){var e=(0,i.Z)(l().mark((function e(t,s){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new z.Z).post({idProfile:s.id}).fetch("/api/processes/"+t.id+"/profiles");case 2:(n=e.sent).error?this.props.setMessage(n.package+" : "+n.message):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"deleteProfile",value:function(){var e=(0,i.Z)(l().mark((function e(t,s){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new z.Z).delete().fetch("/api/processes/"+t.id+"/profiles/"+s.id);case 2:(n=e.sent).error?this.props.setMessage(n.package+" : "+n.message):this.componentDidMount();case 4:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"updateAction",value:function(e,t){var s={};s[e.id]=t,this.setState(s)}},{key:"render",value:function(){var e=this;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(S.Z,(0,n.Z)((0,n.Z)({},this.props),{},{children:(0,M.jsxs)(d.Z,{variant:"outlined",style:{padding:12,justifyContent:"left"},children:[(0,M.jsx)(h.Z,{variant:"h6",fontWeight:"bold",children:"Process"}),(0,M.jsx)(h.Z,{variant:"subtitle2",color:"text.secondary",children:"Do multiple action at once"})]})})),(0,M.jsxs)(b.Z,{loading:this.state.loading,children:[(0,M.jsxs)(f.ZP,{container:!0,spacing:1,style:{marginTop:0},children:[(0,M.jsx)(f.ZP,{item:!0,xs:12,md:8,lg:9,children:(0,M.jsx)(g.Z,{variant:"outlined",style:{padding:12},children:(0,M.jsx)(h.Z,{variant:"subtitle1",children:String.capitalizeFirstLetter(this.state.process.description)})})}),(0,M.jsx)(f.ZP,{item:!0,xs:12,md:4,lg:3,children:(0,M.jsx)(g.Z,{elevation:3,children:(0,M.jsxs)(x.Z,{variant:"contained",onClick:function(){e.executeAction()},style:{width:"100%",padding:10,flexDirection:"row",display:"flex"},children:["button"==this.state.process.mode?(0,M.jsx)(j.Z,{fontSize:"large",style:{marginRight:16}}):"on"==this.state.process.state?(0,M.jsx)(y.Z,{fontSize:"large",style:{marginRight:16}}):(0,M.jsx)(k.Z,{fontSize:"large",style:{marginRight:16}}),"button"==this.state.process.mode||"on"==this.state.process.state?(0,M.jsx)(h.Z,{textAlign:"center",variant:"subtitle1",children:String.capitalizeFirstLetter(this.state.process.description_on)}):(0,M.jsx)(h.Z,{textAlign:"center",variant:"subtitle1",children:String.capitalizeFirstLetter(this.state.process.description_off)})]})})}),(0,M.jsx)(f.ZP,{item:!0,xs:12,md:9,lg:9,children:(0,M.jsx)(g.Z,{variant:"outlined",style:{padding:12},children:(0,M.jsx)(f.ZP,{container:!0,spacing:1,children:0==this.state.process.inputs.filter((function(t){return t.state==e.state.process.state})).length?(0,M.jsx)(f.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,M.jsx)(h.Z,{variant:"subtitle1",color:"text.secondary",children:"No input"})}):this.state.process.inputs.filter((function(t){return t.state==e.state.process.state})).map((function(t,s){return(0,M.jsx)(f.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,M.jsx)(w.Z,{options:t.options,label:String.capitalizeFirstLetter(t.reference.split("_")[0]),setState:e.setState.bind(e),id:t.id,action:t})})}))})})}),(0,M.jsx)(f.ZP,{item:!0,xs:12,md:3,lg:3,children:(0,M.jsx)(g.Z,{variant:"outlined",style:{padding:12},children:this.state.profiles.map((function(t,s){var n=!1;return e.state.process.profiles.forEach((function(e){e.profile==t.id&&(n=!0)})),(0,M.jsx)(Z.ZP,{style:{padding:1},children:(0,M.jsx)(v.Z,{control:(0,M.jsx)(m.Z,{checked:n,onChange:function(){n?e.deleteProfile(e.state.process,t):e.insertProfile(e.state.process,t)},color:"primary"}),label:t.name})},s)}))})})]}),(0,M.jsx)(P.Z,{onClick:function(){e.delete(e.state.process.id)}})]})]})}}]),s}(u.Component),_=C},5397:function(e,t,s){var n=s(4223),i=s(184);t.Z=(0,n.Z)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},6960:function(e,t,s){var n=s(4223),i=s(184);t.Z=(0,n.Z)((0,i.jsx)("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonChecked")},1141:function(e,t,s){var n=s(4223),i=s(184);t.Z=(0,n.Z)((0,i.jsx)("path",{d:"M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5zM7 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"}),"ToggleOff")},1131:function(e,t,s){var n=s(4223),i=s(184);t.Z=(0,n.Z)((0,i.jsx)("path",{d:"M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5zm0 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"}),"ToggleOn")}}]);
//# sourceMappingURL=862.ce2d1567.chunk.js.map