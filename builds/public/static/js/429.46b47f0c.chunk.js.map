{"version":3,"file":"static/js/429.46b47f0c.chunk.js","mappings":"iTAOMA,EAAAA,SAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,GAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,GAEF,WAAYC,GAAQ,IAAD,yBACf,cAAMA,IAEDC,MAAQ,CACTC,QAAS,GACTC,OAAO,GALI,EAqGlB,OA7FA,4EAED,2HAG2BC,MAAM,uCAAyCC,KAAKL,MAAMM,MAAMC,OAAOC,IAHlG,cAGYC,EAHZ,gBAI+BA,EAAOC,OAJtC,UAIYC,EAJZ,OAOYC,EAAW,GAC0B,GAArCC,SAASC,OAAOC,MAAM,KAAKC,QAC3BH,SAASC,OAAOC,MAAM,KAAK,GAAGA,MAAM,KAAKE,KAAI,SAAAC,GACzC,IAAIC,EAAMD,EAAMH,MAAM,KACJ,GAAdI,EAAIH,SACJJ,EAASO,EAAI,IAAMA,EAAI,OAKb,QAAlBP,EAAST,MAjBrB,iBAkBYE,KAAKe,SAAS,CACVlB,QAASU,EAASV,QAAQmB,QAAQ,QAAS,KAC3ClB,OAAO,IApBvB,gCAsByCmB,GAAtBV,EAASW,WAAgD,IAAtBX,EAASW,UAtB/D,iBAuBYlB,KAAKe,SAAS,CACVlB,QAAS,kCACTC,OAAO,IAzBvB,gCA2BoCmB,GAAjBV,EAASY,MAAsC,IAAjBZ,EAASY,KA3B1D,iBA4BYnB,KAAKe,SAAS,CACVlB,QAAS,6BACTC,OAAO,IA9BvB,wBAwCY,IAAWsB,KAPPF,EAAYX,EAASW,iBAClBX,EAASW,UACZC,EAAOZ,EAASY,YACbZ,EAASY,YACTZ,EAAST,MAEZuB,EAAe,GACDd,EACdc,EAAaC,KAAK,CACdJ,UAAWE,EACXG,MAAOhB,EAASa,GAAKJ,QAAQ,OAAQ,OA3CzD,kBA+CqC,IAAIQ,EAAAA,GAAUC,KAAK,CAAEN,KAAMA,EAAMO,OAAQpB,EAAWqB,QAAQC,KAAMV,UAAWA,EAAUF,QAAQ,QAAS,KAAMT,SAAUc,IAAgBtB,MAAM,qBA/CnL,SA+CgB8B,EA/ChB,QAgD6B/B,MACbE,KAAKe,SAAS,CACVlB,QAASgC,EAAahC,QACtBC,OAAO,IAGXE,KAAKL,MAAMmC,QAAQR,KAAK,SAAWH,EAAO,gBAAkBU,EAAaE,KAAK5B,IAtD9F,0DA2DQH,KAAKe,SAAS,CACVlB,QAAS,KAAMmC,WACflC,OAAO,IA7DnB,4GAFC,IAED,oBAoEA,WACI,OACI,iCACI,SAAC,IAAD,CAASmC,SAAUjC,KAAKL,MAAMsC,SAA9B,UACI,UAAC,IAAD,CAAOC,QAAQ,WAAWC,MAAO,CAAEC,QAAS,GAAIC,aAAc,GAAIC,eAAgB,QAAlF,WACI,SAAC,IAAD,CAAYJ,QAAQ,KAApB,0BACA,SAAC,IAAD,CAAYA,QAAQ,WAAWK,MAAM,iBAArC,SAAwD,wBAI5DvC,KAAKJ,MAAME,OACP,UAAC,IAAD,CAAMoC,QAAQ,WAAWC,MAAO,CAAEC,QAAS,IAA3C,WACI,SAAC,IAAD,CAAYF,QAAQ,KAApB,SAA2B,4CAC3B,SAAC,IAAD,CAAYC,MAAO,CAAEK,UAAW,GAAKN,QAAQ,YAA7C,SAA2D,YAAclC,KAAKJ,MAAMC,WACpF,SAAC,KAAD,CAAM4C,GAAI,QAAV,UACI,SAAC,IAAD,CAAQP,QAAQ,WAAWK,MAAM,UAAUJ,MAAO,CAAEK,UAAW,GAAIE,YAAa,QAASH,MAAO,SAAhG,SACK,mBAGH,YAI7B,EAvGC7C,CAA4BiD,EAAAA,WA0GlC","sources":["screens/contents/Smartobject/OAuth.js"],"sourcesContent":["import React from 'react'\r\nimport { Typography, Paper, Card, Button } from '@mui/material'\r\nimport Alert from '../../../components/Alert'\r\nimport { Link } from 'react-router-dom'\r\nimport Request from '../../../utils/Request'\r\nimport Desktop from '../../../components/Desktop'\r\n\r\nclass RedirectSmartobject extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            message: \"\",\r\n            error: false\r\n        }\r\n\r\n    }\r\n\r\n    async componentDidMount() {\r\n        try {\r\n\r\n            let result = await fetch(\"https://market.intendant.io/docs?id=\" + this.props.match.params.id)\r\n            let resultJSON = await result.json()\r\n\r\n\r\n            let settings = {}\r\n            if (location.search.split(\"?\").length == 2) {\r\n                location.search.split(\"?\")[1].split(\"&\").map(param => {\r\n                    let tmp = param.split(\"=\")\r\n                    if (tmp.length == 2) {\r\n                        settings[tmp[0]] = tmp[1]\r\n                    }\r\n                })\r\n            }\r\n\r\n            if (settings.error == \"true\") {\r\n                this.setState({\r\n                    message: settings.message.replace(/\\%20/g, \" \"),\r\n                    error: true\r\n                })\r\n            } else if (settings.reference == undefined || settings.reference == \"\") {\r\n                this.setState({\r\n                    message: \"Missing reference, please retry\",\r\n                    error: true\r\n                })\r\n            } else if (settings.room == undefined || settings.room == \"\") {\r\n                this.setState({\r\n                    message: \"Missing room, please retry\",\r\n                    error: true\r\n                })\r\n            } else {\r\n                let reference = settings.reference\r\n                delete settings.reference\r\n                let room = settings.room\r\n                delete settings.room\r\n                delete settings.error\r\n\r\n                let realSettings = []\r\n                for (const key in settings) {\r\n                    realSettings.push({\r\n                        reference: key,\r\n                        value: settings[key].replace(/%7C/g, \"|\")\r\n                    })\r\n                }\r\n\r\n                let resultInsert = await new Request().post({ room: room, module: resultJSON.package.name, reference: reference.replace(/\\%20/g, \" \"), settings: realSettings }).fetch(\"/api/smartobjects\")\r\n                if (resultInsert.error) {\r\n                    this.setState({\r\n                        message: resultInsert.message,\r\n                        error: true\r\n                    })\r\n                } else {\r\n                    this.props.history.push('/room/' + room + '/smartobject/' + resultInsert.data.id)\r\n                }\r\n            }\r\n\r\n        } catch (error) {\r\n            this.setState({\r\n                message: error.toString(),\r\n                error: true\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Desktop isMobile={this.props.isMobile}>\r\n                    <Paper variant=\"outlined\" style={{ padding: 12, marginBottom: 10, justifyContent: 'left' }}>\r\n                        <Typography variant='h5' >Smartobject</Typography>\r\n                        <Typography variant='sutitle2' color=\"text.secondary\" >{\"oAuth redirect\"}</Typography>\r\n                    </Paper>\r\n                </Desktop>\r\n                {\r\n                    this.state.error ?\r\n                        <Card variant='outlined' style={{ padding: 10 }}>\r\n                            <Typography variant='h5' >{\"Oups ! Smartobject cannot to be create\"}</Typography>\r\n                            <Typography style={{ marginTop: 5 }} variant='subtitle1' >{\"Reason : \" + this.state.message}</Typography>\r\n                            <Link to={'/room'}>\r\n                                <Button variant='outlined' color='inherit' style={{ marginTop: 10, borderColor: 'white', color: 'white' }}>\r\n                                    {\"Retry now\"}\r\n                                </Button>\r\n                            </Link>\r\n                        </Card> : null\r\n                }\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default RedirectSmartobject"],"names":["RedirectSmartobject","props","state","message","error","fetch","this","match","params","id","result","json","resultJSON","settings","location","search","split","length","map","param","tmp","setState","replace","undefined","reference","room","key","realSettings","push","value","Request","post","module","package","name","resultInsert","history","data","toString","isMobile","variant","style","padding","marginBottom","justifyContent","color","marginTop","to","borderColor","React"],"sourceRoot":""}