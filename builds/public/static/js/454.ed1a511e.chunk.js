"use strict";(self.webpackChunk_intendant_dashboard=self.webpackChunk_intendant_dashboard||[]).push([[454],{8853:function(e,t,s){s(2791);var n=s(7621),i=s(3400),a=s(5683),r=s(184);t.Z=function(e){return(0,r.jsx)(n.Z,{variant:"outlined",style:{width:"min-content",marginTop:8,marginBottom:10,alignContent:"center",justifyContent:"center",alignSelf:"center"},children:(0,r.jsx)(i.Z,{style:{borderRadius:0},onClick:function(){e.onClick&&e.onClick()},children:(0,r.jsx)(a.Z,{})})})}},6454:function(e,t,s){s.r(t);var n=s(8489),i=s(3032),a=s(7853),r=s(4531),o=s(8932),l=s(2587),c=s(4322),d=s.n(c),p=s(2791),h=s(703),u=s(890),f=s(7621),g=s(1889),x=s(7391),v=s(8096),Z=s(9437),m=s(5523),w=s(1503),j=s(8853),y=s(419),k=s(5886),C=s(9388),b=s(184),P=function(e){(0,o.Z)(s,e);var t=(0,l.Z)(s);function s(e){var n;return(0,a.Z)(this,s),(n=t.call(this,e)).state={profiles:[],profile:{id:0},login:"",loading:!0,password:"",confirmationPassword:""},e.setTitle("New user"),e.setActionType("return"),n}return(0,r.Z)(s,[{key:"componentDidMount",value:function(){var e=(0,i.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new k.Z).get().fetch("/api/profiles");case 2:(t=e.sent).error?(this.props.setMessage(t.package+" : "+t.message),this.props.history.push("/users")):this.setState({profiles:t.data,profile:t.data[0],loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=(0,i.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.login.length){e.next=4;break}this.props.setMessage("Missing login"),e.next=16;break;case 4:if(0!=this.state.password.length){e.next=8;break}this.props.setMessage("Missing password"),e.next=16;break;case 8:if(this.state.password==this.state.confirmationPassword){e.next=12;break}this.props.setMessage("Passwords are not the same"),e.next=16;break;case 12:return e.next=14,(new k.Z).post({login:this.state.login,password:this.state.password,profile:this.state.profile.id,imei:""}).fetch("/api/users");case 14:(t=e.sent).error?this.props.setMessage(t.package+" : "+t.message):this.props.history.push("/user");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateProfile",value:function(e){var t={id:0};this.state.profiles.forEach((function(s){s.id==e&&(t=s)})),this.setState({profile:t})}},{key:"render",value:function(){var e=this;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.Z,(0,n.Z)((0,n.Z)({},this.props),{},{children:(0,b.jsxs)(h.Z,{variant:"outlined",style:{padding:12,justifyContent:"left"},children:[(0,b.jsx)(u.Z,{variant:"h6",fontWeight:"bold",children:"New user"}),(0,b.jsx)(u.Z,{variant:"subtitle2",color:"text.secondary",children:"Create new access"})]})})),(0,b.jsxs)(C.Z,{loading:this.state.loading,children:[(0,b.jsx)(f.Z,{variant:"outlined",style:{paddingTop:4,paddingBottom:4,paddingLeft:12,paddingRight:12,marginTop:8},children:(0,b.jsxs)(g.ZP,{container:!0,spacing:1,style:{marginTop:0},children:[(0,b.jsx)(g.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,b.jsx)(x.Z,{style:{width:"100%"},placeholder:"Login",variant:"outlined",value:this.state.login,onChange:function(t){e.setState({login:t.currentTarget.value})}})}),(0,b.jsx)(g.ZP,{item:!0,xs:12,md:6,lg:6,children:(0,b.jsx)(x.Z,{style:{width:"100%"},type:"password",placeholder:"Password",variant:"outlined",value:this.state.password,onChange:function(t){e.setState({password:t.currentTarget.value})}})}),(0,b.jsx)(g.ZP,{item:!0,xs:12,md:6,lg:6,children:(0,b.jsx)(x.Z,{style:{width:"100%"},placeholder:"Confirm password",type:"password",variant:"outlined",value:this.state.confirmationPassword,onChange:function(t){e.setState({confirmationPassword:t.currentTarget.value})}})}),(0,b.jsx)(g.ZP,{item:!0,xs:12,md:10,lg:7,children:(0,b.jsx)(v.Z,{children:(0,b.jsx)(Z.Z,{value:this.state.profile.id,style:{display:"flex",flexDirection:this.props.isMobile?"column":"row"},onChange:function(t){e.updateProfile(t.target.value)},children:this.state.profiles.map((function(e){return(0,b.jsx)(m.Z,{value:e.id,control:(0,b.jsx)(w.Z,{}),label:String.capitalizeFirstLetter(e.name)})}))})})})]})}),(0,b.jsx)(j.Z,{onClick:function(){e.add()}})]})]})}}]),s}(p.Component);t.default=P},5683:function(e,t,s){var n=s(4223),i=s(184);t.Z=(0,n.Z)((0,i.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save")}}]);
//# sourceMappingURL=454.ed1a511e.chunk.js.map