"use strict";(self.webpackChunk_intendant_dashboard=self.webpackChunk_intendant_dashboard||[]).push([[844],{5770:function(t,e,n){n.r(e);var i=n(8489),s=n(3032),a=n(7853),r=n(4531),o=n(8932),l=n(2587),c=n(4322),d=n.n(c),h=n(2791),u=n(9779),p=n.n(u),g=n(703),x=n(4554),f=n(890),m=n(7621),Z=n(1889),v=n(9373),j=n(4807),y=(n(4893),n(722)),S=n(419),k=n(5886),w=n(9388),b=(n(7610),n(184)),A=function(t){(0,o.Z)(n,t);var e=(0,l.Z)(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t)).state={id:t.match.params.id,module:{reference:"",actions:[],room:{},state:{status:"unknown"}},expanded:"action",rooms:[],modalOpen:!1,content:{},loadingAction:"",loading:!0},t.setTitle(""),t.setActionType("return"),i}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){var t=(0,s.Z)(d().mark((function t(){var e;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new k.Z).get().fetch("/api/modules/"+this.state.id);case 2:(e=t.sent).error?(this.props.setMessage(e.package+" : "+e.message),this.props.history.push("/module")):(this.props.setTitle(e.data.reference),this.setState({loadingAction:"",loading:!1,module:e.data}));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"executeAction",value:function(){var t=(0,s.Z)(d().mark((function t(e,n){var i,s,a,r,o,l;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.setState({loadingAction:e.id}),i={},s={},a=0;a<n.length;a++)r=n[a],o=this.state[e.id+"-"+r.id],s[e.id+"-"+r.id]=null,i[r.id]=o||null;return this.setState(s),t.next=7,(new k.Z).post({settings:i}).fetch("/api/modules/"+this.state.id+"/actions/"+e.id);case 7:(l=t.sent).error?(this.props.setMessage(l.package+" : "+l.message),this.setState({loadingAction:""})):(this.setState({modalOpen:!0,content:l}),this.componentDidMount());case 9:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.Z,(0,i.Z)((0,i.Z)({},this.props),{},{children:(0,b.jsx)(g.Z,{variant:"outlined",style:{padding:12,justifyContent:"left"},children:(0,b.jsx)(x.Z,{style:{display:"flex",flex:1},children:(0,b.jsxs)(x.Z,{style:{flex:4,alignSelf:"center",alignItems:"center"},children:[(0,b.jsx)(f.Z,{variant:"h6",fontWeight:"bold",children:String.capitalizeFirstLetter(this.state.module.reference)}),(0,b.jsx)(f.Z,{variant:"subtitle2",color:"text.secondary",children:String.capitalizeFirstLetter(this.state.module.name)})]})})})})),(0,b.jsxs)(w.Z,{loading:this.state.loading,children:[(0,b.jsx)(m.Z,{variant:"outlined",style:{padding:12,marginTop:8},children:(0,b.jsx)(Z.ZP,{container:!0,spacing:2,children:this.state.module.actions.map((function(e,n){return(0,b.jsx)(Z.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,b.jsxs)(Z.ZP,{container:!0,spacing:0==e.settings.length&&t.props.isMobile?0:2,children:[(0,b.jsx)(Z.ZP,{item:!0,xs:12,md:3,lg:3,children:(0,b.jsx)(m.Z,{elevation:2,children:(0,b.jsx)(v.Z,{disabled:e.id==t.state.loadingAction,size:"large",variant:"contained",onClick:function(){t.executeAction(e,e.settings)},style:{width:"100%",flexDirection:"row",display:"flex"},children:(0,b.jsx)(f.Z,{textAlign:"center",variant:"subtitle2",children:e.name})})})}),(0,b.jsx)(Z.ZP,{item:!0,xs:12,md:9,lg:9,style:{alignSelf:"center"},children:(0,b.jsx)(Z.ZP,{container:!0,spacing:1,children:0==e.settings.length?null:e.settings.map((function(n,i){return(0,b.jsx)(y.Z,{options:n.options,label:String.capitalizeFirstLetter(n.id),setState:t.setState.bind(t),id:e.id+"-"+n.id,action:n})}))})})]})},n)}))})}),(0,b.jsx)(j.Z,{open:this.state.modalOpen,style:{top:"25%",left:"25%"},onClose:function(){t.setState({modalOpen:!1})},children:(0,b.jsx)(m.Z,{variant:"outlined",style:{overflow:"auto",maxHeight:"50vh",maxWidth:"50vw",padding:20},children:(0,b.jsx)(p(),{style:{fontSize:12},id:"json-pretty",data:this.state.content})})})]})]})}}]),n}(h.Component);e.default=A},5397:function(t,e,n){var i=n(4223),s=n(184);e.Z=(0,i.Z)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")}}]);
//# sourceMappingURL=844.bc8b0226.chunk.js.map