{"version":3,"file":"static/js/279.e9abe917.chunk.js","mappings":"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","sources":["screens/contents/Authorisation/List.js"],"sourcesContent":["import React from 'react'\r\nimport { Typography, Button, ListItemText, ListItem, Divider, List, Paper } from '@mui/material'\r\nimport Theme from '../../../Theme'\r\nimport Alert from '../../../components/Alert'\r\nimport Request from '../../../utils/Request'\r\n\r\nclass Security extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            page: 0,\r\n            profiles: [],\r\n            selectProfile: '',\r\n            authorizations: []\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        let result = await new Request().get().fetch(\"/api/profiles\")\r\n        if (result.error) {\r\n            this.props.setMessage(result.package + \" : \" + result.message)\r\n        } else {\r\n            if (this.state.selectProfile === \"\") {\r\n                this.setState({\r\n                    profiles: result.data,\r\n                    selectProfile: result.data[0].id\r\n                })\r\n                this.onSelectProfile(result.data[0].id)\r\n            } else {\r\n                this.setState({ profiles: result.data })\r\n                this.onSelectProfile(this.state.selectProfile)\r\n            }\r\n        }\r\n    }\r\n\r\n    getColor(type) {\r\n        switch (type) {\r\n            default:\r\n            case 'GET':\r\n                return Theme.palette.success.main\r\n            case 'POST':\r\n                return Theme.palette.error.main\r\n            case 'PUT':\r\n                return Theme.palette.warning.main\r\n            case 'DELETE':\r\n                return Theme.palette.info.main\r\n        }\r\n    }\r\n\r\n    async onSelectProfile(id) {\r\n        this.setState({\r\n            selectProfile: id\r\n        })\r\n        let result = await new Request().get().fetch(\"/api/profiles/\" + id + \"/authorizations\")\r\n        if (result.error) {\r\n            this.props.setMessage(result.package + \" : \" + result.message)\r\n        } else {\r\n            this.setState({ authorizations: result.data })\r\n        }\r\n    }\r\n\r\n    async updateSecure(profile, pAuthorization, secure) {\r\n        let result = await new Request().post({ authorization: pAuthorization, secure: secure }).fetch(\"/api/profiles/\" + profile + \"/authorizations\")\r\n        if (result.error) {\r\n            this.props.setMessage(result.package + \" : \" + result.message)\r\n        } else {\r\n            this.componentDidMount()\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Paper style={{ padding: 10, marginBottom: 10, flexDirection: 'row', display: 'flex' }}>\r\n                    {\r\n                        this.state.profiles.map(profile => {\r\n                            return (\r\n                                <Button color='inherit' style={{ marginLeft: 5, marginRight: 5 }} onClick={() => { this.onSelectProfile(profile.id) }} variant={this.state.selectProfile === profile.id ? 'contained' : 'outlined'} >\r\n                                    {\r\n                                        profile.name\r\n                                    }\r\n                                </Button>\r\n                            )\r\n                        })\r\n                    }\r\n                </Paper>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                    <List style={{ backgroundColor: Theme.palette.background.paper, width: '45%' }}>\r\n                        <ListItem >\r\n                            <ListItemText >\r\n                                <Typography variant='subtitle1' style={{ display: 'flex', padding: 3, borderRadius: 3, backgroundColor: Theme.palette.error.main, alignContent: 'center', alignItems: 'center', justifyContent: 'center', alignSelf: 'center' }}>\r\n                                    Refusé\r\n                                </Typography>\r\n                            </ListItemText>\r\n                        </ListItem>\r\n                        <Divider />\r\n                        {\r\n                            this.state.authorizations.sort((a, b) => { return a.method < b.method }).filter(a => { return a.secure === 0 }).map(authorization => {\r\n                                return (\r\n                                    <ListItem button onClick={() => { this.updateSecure(this.state.selectProfile, authorization.id, 1) }}>\r\n                                        <ListItemText style={{ display: 'flex', flexDirection: 'row' }}>\r\n                                            <div style={{ display: 'flex', flexDirection: 'row' }}>\r\n                                                <Typography variant='body' style={{ padding: 3, paddingLeft: 8, paddingRight: 8, borderRadius: 3, backgroundColor: this.getColor(authorization.method) }}>\r\n                                                    {authorization.method}\r\n                                                </Typography>\r\n                                                <Typography variant='body' style={{ padding: 3, borderRadius: 3, marginLeft: 5 }}>\r\n                                                    {authorization.reference}\r\n                                                </Typography>\r\n                                            </div>\r\n                                        </ListItemText>\r\n                                    </ListItem>\r\n                                )\r\n                            })\r\n                        }\r\n                    </List>\r\n                    <List style={{ backgroundColor: Theme.palette.background.paper, width: '45%' }}>\r\n                        <ListItem >\r\n                            <ListItemText >\r\n                                <Typography variant='subtitle1' style={{ display: 'flex', padding: 3, borderRadius: 3, backgroundColor: Theme.palette.success.main, alignContent: 'center', alignItems: 'center', justifyContent: 'center', alignSelf: 'center' }}>\r\n                                    Authorisé\r\n                                </Typography>\r\n                            </ListItemText>\r\n                        </ListItem>\r\n                        <Divider />\r\n                        {\r\n                            this.state.authorizations.sort((a, b) => { return a.method < b.method }).filter(a => { return a.secure === 1 }).map(authorization => {\r\n                                return (\r\n                                    <ListItem button onClick={() => { this.updateSecure(this.state.selectProfile, authorization.id, 0) }} >\r\n                                        <ListItemText style={{ display: 'flex', flexDirection: 'row' }}>\r\n                                            <div style={{ display: 'flex', flexDirection: 'row' }}>\r\n                                                <Typography variant='body' style={{ padding: 3, paddingLeft: 8, paddingRight: 8, borderRadius: 3, backgroundColor: this.getColor(authorization.method) }}>\r\n                                                    {authorization.method}\r\n                                                </Typography>\r\n                                                <Typography variant='body' style={{ padding: 3, borderRadius: 3, marginLeft: 5 }}>\r\n                                                    {authorization.reference}\r\n                                                </Typography>\r\n                                            </div>\r\n                                        </ListItemText>\r\n                                    </ListItem>\r\n                                )\r\n                            })\r\n                        }\r\n                    </List>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Security"],"names":["Security","props","state","page","profiles","selectProfile","authorizations","Request","get","fetch","result","error","this","setMessage","package","message","setState","data","id","onSelectProfile","type","Theme","profile","pAuthorization","secure","post","authorization","componentDidMount","style","padding","marginBottom","flexDirection","display","map","color","marginLeft","marginRight","onClick","variant","name","justifyContent","backgroundColor","width","borderRadius","alignContent","alignItems","alignSelf","sort","a","b","method","filter","button","updateSecure","paddingLeft","paddingRight","getColor","reference","React"],"sourceRoot":""}