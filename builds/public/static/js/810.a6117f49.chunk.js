"use strict";(self.webpackChunk_intendant_dashboard=self.webpackChunk_intendant_dashboard||[]).push([[810],{3810:function(t,e,n){n.r(e),n.d(e,{default:function(){return _}});var i=n(3032),s=n(7853),r=n(4531),a=n(8932),o=n(2587),d=n(4322),l=n.n(d),c=n(2791),u=n(703),h=n(890),p=n(1889),g=n(7621),f=n(5886),x=(n(722),n(6647)),v=n(9504),w=n(4721),Z=n(6125),j=n(2363),m=n(3400),y=n(5397),k=n(6565),b=n(184),S=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(t){var i;return(0,s.Z)(this,n),(i=e.call(this,t)).state={widget:i.props.widget,loading:!1},i}return(0,r.Z)(n,[{key:"componentDidUpdate",value:function(){this.props.widget!=this.state.widget&&this.setState({widget:this.props.widget})}},{key:"render",value:function(){var t=this;return this.state.loading?(0,b.jsx)(k.Z,{}):(0,b.jsx)(p.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,b.jsxs)(g.Z,{variant:"outlined",children:[(0,b.jsx)(x.Z,{onClick:function(){t.props.onSelect()},children:(0,b.jsxs)(v.Z,{children:[this.state.widget.values.filter((function(t){return"title"==t.type})).map((function(t,e){return(0,b.jsx)(h.Z,{variant:"subtitle1",component:"div",children:String.capitalizeFirstLetter(t.value)},e)})),this.state.widget.values.filter((function(t){return"text"==t.type})).length>0&&(0,b.jsx)(w.Z,{style:{marginBottom:10,marginTop:5}}),this.state.widget.values.filter((function(t){return"text"==t.type})).map((function(e,n){return(0,b.jsx)(h.Z,{variant:"body2",color:e.style&&e.style.color?t.state.widget.dataSources[e.style.color]:"text.secondary",children:String.capitalizeFirstLetter(e.value)},n)}))]})}),(0,b.jsx)(Z.Z,{in:this.props.open,timeout:"auto",unmountOnExit:!0,children:(0,b.jsx)(j.Z,{children:(0,b.jsx)(m.Z,{size:"small",onClick:function(){t.props.onDelete()},children:(0,b.jsx)(y.Z,{})})})})]})},this.props.index)}}]),n}(c.Component),C=n(6711),M=n(9388),D=n(419),T=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(t){var i;return(0,s.Z)(this,n),(i=e.call(this,t)).state={loading:!0,widgets:[],open:!1,widget:{id:-1}},t.setTitle("Widget"),t.setActionType("list"),i}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){var t=(0,i.Z)(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new f.Z).get().fetch("/api/widgets");case 2:(e=t.sent).error?this.props.setMessage(e.package+" : "+e.message):this.setState({loading:!1,widgets:e.data});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"delete",value:function(){var t=(0,i.Z)(l().mark((function t(){var e,n=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new f.Z).delete({}).fetch("/api/widgets/"+this.state.widget.id);case 2:(e=t.sent).error?this.props.setMessage(e.package+" : "+e.message):this.setState({loading:!0,anchorEl:null,popover:!1},(function(){n.componentDidMount()}));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(D.Z,{isMobile:this.props.isMobile,children:(0,b.jsxs)(u.Z,{variant:"outlined",style:{padding:12,justifyContent:"left"},children:[(0,b.jsx)(h.Z,{variant:"h6",fontWeight:"bold",children:"Widget"}),(0,b.jsx)(h.Z,{variant:"subtitle2",color:"text.secondary",children:"Show what you need"})]})}),(0,b.jsx)(M.Z,{loading:this.state.loading,children:(0,b.jsxs)(p.ZP,{container:!0,spacing:1,style:{marginTop:0},children:[0==this.state.widgets.length?(0,b.jsx)(p.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,b.jsx)(g.Z,{variant:"outlined",style:{padding:12},children:(0,b.jsx)(h.Z,{variant:"subtitle1",color:"text.secondary",children:"You have not added a widget"})})}):this.state.widgets.map((function(e,n){return(0,b.jsx)(S,{index:n,onDelete:function(){t.delete()},onSelect:function(){t.setState({widget:e,open:!0})},open:t.state.open&&t.state.widget.id==e.id,widget:e},n)})),(0,b.jsx)(C.Z,{to:"/widget/new"})]})})]})}}]),n}(c.Component),_=T}}]);
//# sourceMappingURL=810.a6117f49.chunk.js.map