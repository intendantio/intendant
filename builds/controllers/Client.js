"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _Controller=_interopRequireDefault(require("./Controller")),_package=_interopRequireDefault(require("../package.json")),_StackTrace=_interopRequireDefault(require("../utils/StackTrace")),_Tracing=_interopRequireDefault(require("../utils/Tracing")),_Result=_interopRequireDefault(require("../utils/Result"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}class Client extends _Controller.default{async insert(a={}){try{if(a.imei){if(a.name){if(a.token){if(a.user){let b=await this.sqlClient.getOneByField({imei:a.imei});if(b.error)return b;if(b.data){let a=await this.sqlClient.deleteOne(b.data.id);if(a.error)return a}let c=await this.sqlClient.insert({id:null,imei:a.imei,name:a.name,token:a.token,user:a.user,lastupdate:"DATE:NOW"});return c.error?c:new _Result.default(_package.default.name,!1,"")}return new _Result.default(_package.default.name,!0,"Missing user")}return new _Result.default(_package.default.name,!0,"Missing token")}return new _Result.default(_package.default.name,!0,"Missing name")}return new _Result.default(_package.default.name,!0,"Missing imei")}catch(a){return _StackTrace.default.save(a),_Tracing.default.error(_package.default.name,"Error occurred when insert client"),new _Result.default(_package.default.name,!0,"Error occurred when insert client")}}async getAll(){try{return await this.sqlClient.getAll()}catch(a){return _StackTrace.default.save(a),_Tracing.default.error(_package.default.name,"Error occurred when get all client"),new _Result.default(_package.default.name,!0,"Error occurred when get all client")}}}var _default=Client;exports.default=_default,module.exports=exports.default;