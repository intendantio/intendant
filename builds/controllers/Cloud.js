"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _Controller=_interopRequireDefault(require("./Controller")),_package=_interopRequireDefault(require("../package.json")),_Tracing=_interopRequireDefault(require("../utils/Tracing")),_Result=_interopRequireDefault(require("../utils/Result")),_Utils=_interopRequireDefault(require("../utils/Utils")),_StackTrace=_interopRequireDefault(require("../utils/StackTrace"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}class Cloud extends _Controller.default{async register(){}async getSingleCode(a){let b=await this.sqlSmartobject.getOne(a);if(b.error)return b;if(!1==b.data)return new _Result.default(_package.default.name,!0,"");let c=await this.sqlSingleCode.getOneByField({smartobject:a});if(c.error)return c;let d=c.data;if(!1==d){let b=!0,c="";for(;b;){c=_Utils.default.generateSingleCodeUnique();let a=await this.sqlSingleCode.count({code:c});if(a.error)return a;0==a.data.count&&(b=!1)}let e=await this.sqlSingleCode.insert({smartobject:a,code:c});if(e.error)return e;d={code:c,smartobject:a}}return new _Result.default(_package.default.name,!1,"",d)}}var _default=Cloud;exports.default=_default,module.exports=exports.default;