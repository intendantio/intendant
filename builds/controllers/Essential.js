"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _Controller=_interopRequireDefault(require("./Controller")),_StackTrace=_interopRequireDefault(require("../utils/StackTrace")),_Tracing=_interopRequireDefault(require("../utils/Tracing")),_Result=_interopRequireDefault(require("../utils/Result")),_package=_interopRequireDefault(require("../package.json"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}class Essential extends _Controller.default{constructor(a){super(),this.controllers=a}async sendNotification(a={}){try{let b=await this.controllers.client.getAll();return await this.controllers.notification.notify("Intendant",a.message,b.data.map(a=>a.token)),new _Result.default(_package.default.name,!1,"")}catch(a){return _StackTrace.default.save(a),_Tracing.default.error(_package.default.name,"Error occurred when use essential sendNotification"),new _Result.default(_package.default.name,!0,"Error occurred use essential sendNotification")}}async enableRoutine(a={}){try{return await this.controllers.routine.updateStatus(a.routine,1),new _Result.default(_package.default.name,!1,"")}catch(a){return _StackTrace.default.save(a),_Tracing.default.error(_package.default.name,"Error occurred when use essential enableRoutine"),new _Result.default(_package.default.name,!0,"Error occurred use when essential enableRoutine")}}async disableRoutine(a={}){try{return await this.controllers.routine.updateStatus(a.routine,0),new _Result.default(_package.default.name,!1,"")}catch(a){return _StackTrace.default.save(a),_Tracing.default.error(_package.default.name,"Error occurred when use essential disableRoutine"),new _Result.default(_package.default.name,!0,"Error occurred when essential disableRoutine")}}async restart(a={}){process.exit()}async executeAction(a,b={}){return this[a]?this[a](b):new _Result.default(_package.default.name,!0,"Invalid essential action")}async getAll(){return new _Result.default(_package.default.name,!1,"",[{id:"sendNotification",name:"Send notification",description:"Send at all device all notification",settings:[{id:"message",type:"text",default:""}]},{id:"enableRoutine",name:"Enable routine",description:"Enable one routine",settings:[{id:"routine",type:"number",default:""}]},{id:"disableRoutine",name:"Disable routine",description:"Disable one routine",settings:[{id:"routine",type:"number",default:""}]},{id:"restart",name:"Restart intendant",description:"Restart intendant server",settings:[]}])}}var _default=Essential;exports.default=_default,module.exports=exports.default;